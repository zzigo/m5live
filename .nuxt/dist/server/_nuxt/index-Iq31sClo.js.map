{"version":3,"file":"index-Iq31sClo.js","sources":["../../../../node_modules/nuxt/dist/app/compat/interval.js","../../../../virtual:public?%2Fhkb.svg","../../../../composables/useFavicon.ts","../../../../pages/index.vue"],"sourcesContent":["import { createError } from \"../composables/error.js\";\nconst intervalError = \"[nuxt] `setInterval` should not be used on the server. Consider wrapping it with an `onNuxtReady`, `onBeforeMount` or `onMounted` lifecycle hook, or ensure you only call it in the browser by checking `import.meta.client`.\";\nexport const setInterval = import.meta.client ? window.setInterval : () => {\n  if (import.meta.dev) {\n    throw createError({\n      statusCode: 500,\n      message: intervalError\n    });\n  }\n  console.error(intervalError);\n};\n","import { publicAssetsURL } from '#internal/nuxt/paths';export default publicAssetsURL(\"/hkb.svg\")","import { ref } from 'vue';\n\nexport function useFavicon() {\n  const favicon = ref<HTMLLinkElement | null>(null);\n  let blinkInterval: NodeJS.Timeout | null = null;\n  let fadeTimeout: NodeJS.Timeout | null = null;\n\n  // Initialize favicon reference\n  const initFavicon = () => {\n    favicon.value = document.querySelector(\"link[rel*='icon']\");\n    if (!favicon.value) {\n      favicon.value = document.createElement('link');\n      favicon.value.type = 'image/x-icon';\n      favicon.value.rel = 'shortcut icon';\n      document.head.appendChild(favicon.value);\n    }\n  };\n\n  // Create dynamic favicon\n  const createFavicon = (color: string) => {\n    const canvas = document.createElement('canvas');\n    canvas.width = 32;\n    canvas.height = 32;\n    const ctx = canvas.getContext('2d');\n    if (!ctx) return '';\n\n    // Clear canvas with black background\n    // ctx.fillStyle = '#000000';\n    ctx.fillRect(0, 0, 32, 32);\n\n    // Set line width and stroke style\n    ctx.lineWidth = 2.5;\n    ctx.strokeStyle = color;\n\n    // Calculate circle size based on opacity for zoom effect\n    const opacityMatch = color.match(/[\\d.]+\\)$/);\n    const opacity = opacityMatch ? parseFloat(opacityMatch[0]) : 1;\n    const baseRadius = 7;\n    const radius = baseRadius + (1 - opacity) * 1.5; // Subtle zoom out when fading\n\n    // Center the circles more\n    const centerY = 16;\n    const spacing = 10;\n    const centerX = 16;\n\n    // Draw first O\n    ctx.beginPath();\n    ctx.arc(centerX - spacing/2, centerY, radius, 0, 2 * Math.PI);\n    ctx.stroke();\n\n    // Draw second O\n    ctx.beginPath();\n    ctx.arc(centerX + spacing/2, centerY, radius, 0, 2 * Math.PI);\n    ctx.stroke();\n\n    return canvas.toDataURL();\n  };\n\n  // Start processing animation\n  const startProcessing = () => {\n    initFavicon();\n    if (!favicon.value) return;\n\n    let opacity = 1;\n    let increasing = false;\n\n    // Clear any existing intervals\n    if (blinkInterval) clearInterval(blinkInterval);\n    if (fadeTimeout) clearTimeout(fadeTimeout);\n\n    // Create blinking effect\n    blinkInterval = setInterval(() => {\n      if (increasing) {\n        opacity += 0.1;\n        if (opacity >= 1) {\n          opacity = 1;\n          increasing = false;\n        }\n      } else {\n        opacity -= 0.1;\n        if (opacity <= 0.3) {\n          opacity = 0.3;\n          increasing = true;\n        }\n      }\n\n      const color = `rgba(200, 0, 0, ${opacity})`; // dark red\n      if (favicon.value) {\n        favicon.value.href = createFavicon(color);\n      }\n    }, 50);\n  };\n\n  // Complete processing animation\n  const completeProcessing = () => {\n    if (!favicon.value) return;\n\n    // Clear blinking interval\n    if (blinkInterval) {\n      clearInterval(blinkInterval);\n      blinkInterval = null;\n    }\n\n    // Show success flash\n    favicon.value.href = createFavicon('#00ff00'); // bright green\n\n    // Fade to black\n    let opacity = 1;\n    if (fadeTimeout) clearTimeout(fadeTimeout);\n    \n    fadeTimeout = setTimeout(() => {\n      const fadeInterval = setInterval(() => {\n        opacity -= 0.1;\n        if (opacity <= 0) {\n          clearInterval(fadeInterval);\n          // Reset to original favicon\n          if (favicon.value) {\n            favicon.value.href = createFavicon('#ffffff'); // white\n          }\n          return;\n        }\n        const color = `rgba(0, 255, 0, ${opacity})`;\n        if (favicon.value) {\n          favicon.value.href = createFavicon(color);\n        }\n      }, 50);\n    }, 500); // Wait before starting fade\n  };\n\n  return {\n    startProcessing,\n    completeProcessing\n  };\n}\n","<template>\n  <div class=\"app-container\">\n    <div class=\"settings\">\n      <button\n        @click=\"toggleShowCode\"\n        class=\"icon-button\"\n        :title=\"showCode ? 'Hide Code' : 'Show Code'\"\n      >\n        <svg v-if=\"showCode\" class=\"icon\" viewBox=\"0 0 24 24\">\n          <path\n            fill=\"currentColor\"\n            d=\"M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9M12,4.5C17,4.5 21.27,7.61 23,12C21.27,16.39 17,19.5 12,19.5C7,19.5 2.73,16.39 1,12C2.73,7.61 7,4.5 12,4.5M3.18,12C4.83,15.36 8.24,17.5 12,17.5C15.76,17.5 19.17,15.36 20.82,12C19.17,8.64 15.76,6.5 12,6.5C8.24,6.5 4.83,8.64 3.18,12Z\"\n          />\n        </svg>\n        <svg v-else class=\"icon\" viewBox=\"0 0 24 24\">\n          <path\n            fill=\"currentColor\"\n            d=\"M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z\"\n          />\n        </svg>\n      </button>\n      <button\n        @click=\"handleMobileEvaluate\"\n        class=\"icon-button\"\n        title=\"Evaluate selected text or all if no selection\"\n      >\n        <svg class=\"icon\" viewBox=\"0 0 24 24\">\n          <path fill=\"currentColor\" d=\"M8,5.14V19.14L19,12.14L8,5.14Z\" />\n        </svg>\n      </button>\n      <button\n        @click=\"handleClear\"\n        class=\"icon-button\"\n        title=\"Clear Editor (Ctrl+H)\"\n      >\n        <svg class=\"icon\" viewBox=\"0 0 24 24\">\n          <path\n            fill=\"currentColor\"\n            d=\"M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M7,6H17V19H7V6M9,8V17H11V8H9M13,8V17H15V8H13Z\"\n          />\n        </svg>\n      </button>\n      <button\n        @click=\"handleRandomPrompt\"\n        class=\"icon-button\"\n        title=\"Random Prompt\"\n      >\n        <svg class=\"icon\" viewBox=\"0 0 24 24\">\n          <path\n            fill=\"currentColor\"\n            d=\"M14.83,13.41L13.42,14.82L16.55,17.95L14.5,20H20V14.5L17.96,16.54L14.83,13.41M14.5,4L16.54,6.04L4,18.59L5.41,20L17.96,7.46L20,9.5V4M10.59,9.17L5.41,4L4,5.41L9.17,10.58L10.59,9.17Z\"\n          />\n        </svg>\n      </button>\n      <button @click=\"showHelp = true\" class=\"icon-button\" title=\"Help\">\n        <svg class=\"icon\" viewBox=\"0 0 24 24\">\n          <path\n            fill=\"currentColor\"\n            d=\"M11,18H13V16H11V18M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,6A4,4 0 0,0 8,10H10A2,2 0 0,1 12,8A2,2 0 0,1 14,10C14,12 11,11.75 11,15H13C13,12.75 16,12.5 16,10A4,4 0 0,0 12,6Z\"\n          />\n        </svg>\n      </button>\n      <button @click=\"toggleTestEditor\" class=\"icon-button\" title=\"Go to test\">\n        <svg class=\"icon\" viewBox=\"0 0 24 24\">\n          <path\n            fill=\"currentColor\"\n            d=\"M3 17.25V21H6.75V17.25H3M3 3V13.5H6.75V3H3M8.25 17.25V21H12V17.25H8.25M8.25 3V13.5H12V3H8.25M13.5 17.25V21H17.25V17.25H13.5M13.5 3V13.5H17.25V3H13.5M18.75 17.25V21H22.5V17.25H18.75M18.75 3V13.5H22.5V3H18.75Z\"\n          />\n        </svg>\n      </button>\n    </div>\n    <div class=\"editor-wrapper\" v-if=\"!showTestEditor\">\n      <AceEditor ref=\"editorRef\" @evaluate=\"handleEvaluate\" />\n    </div>\n    <div v-if=\"showTestEditor\" class=\"editor-wrapper\">\n      <MusicVTest />\n    </div>\n    <Transition\n      enter-active-class=\"fadeIn\"\n      leave-active-class=\"fadeOut\"\n      :duration=\"3000\"\n      mode=\"out-in\"\n    >\n      <div v-if=\"plotImage\" class=\"plot-display\" :key=\"transitionKey\">\n        <img\n          :src=\"`data:image/png;base64,${plotImage}`\"\n          alt=\"Plot\"\n          @click=\"showLightbox = true\"\n          class=\"plot-image\"\n        />\n      </div>\n    </Transition>\n    <Transition\n      enter-active-class=\"fadeIn\"\n      leave-active-class=\"fadeOut\"\n      :duration=\"300\"\n    >\n      <div v-if=\"showLightbox\" class=\"lightbox\" @click=\"showLightbox = false\">\n        <button class=\"close-button\" @click.stop=\"showLightbox = false\">\n          <svg class=\"icon\" viewBox=\"0 0 24 24\">\n            <path\n              fill=\"currentColor\"\n              d=\"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z\"\n            />\n          </svg>\n        </button>\n        <img\n          :src=\"`data:image/png;base64,${plotImage}`\"\n          alt=\"Plot\"\n          class=\"lightbox-image\"\n          @click.stop\n        />\n      </div>\n    </Transition>\n    <div class=\"footer\">\n      <div v-if=\"loading\" class=\"loading\">\n        Processing... {{ Math.round(progress) }}%\n      </div>\n      <button\n        v-if=\"isMobileOrTablet\"\n        @click=\"handleMobileEvaluate\"\n        class=\"mobile-evaluate-btn\"\n        title=\"Alt+Enter\"\n      >\n        Evaluate\n      </button>\n    </div>\n    <div v-if=\"error\" class=\"error\">{{ error }}</div>\n    <HelpModal v-model=\"showHelp\" />\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, onUnmounted } from \"vue\";\nimport { useRuntimeConfig } from \"#app\";\nimport AceEditor from \"~/components/AceEditor.vue\";\nimport HelpModal from \"~/components/HelpModal.vue\";\nimport MusicVTest from \"~/components/MusicVTest.vue\";\nimport { useRandomPrompt } from \"~/composables/useRandomPrompt\";\nimport { useFavicon } from \"~/composables/useFavicon\";\n\n// State variables\nconst { startProcessing, completeProcessing } = useFavicon();\nconst editorRef = ref(null);\nconst loading = ref(false);\nconst progress = ref(0);\nconst error = ref(null);\nconst plotImage = ref(null);\nconst showCode = ref(true);\nconst showHelp = ref(false);\nconst transitionKey = ref(0);\nconst isMobileOrTablet = ref(false);\nconst showLightbox = ref(false);\n\nconst checkDevice = () => {\n  isMobileOrTablet.value =\n    /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n      navigator.userAgent\n    );\n};\n\nconst handleEscapeKey = (e) => {\n  if (e.key === \"Escape\" && showLightbox.value) {\n    showLightbox.value = false;\n  }\n};\n\nonMounted(() => {\n  checkDevice();\n  window.addEventListener(\"resize\", checkDevice);\n  window.addEventListener(\"keydown\", handleEscapeKey);\n});\n\nonUnmounted(() => {\n  window.removeEventListener(\"resize\", checkDevice);\n  window.removeEventListener(\"keydown\", handleEscapeKey);\n});\n\nconst handleClear = () => {\n  if (editorRef.value) {\n    editorRef.value.clearEditor();\n  }\n};\n\nconst toggleShowCode = () => {\n  showCode.value = !showCode.value;\n};\n\nconst handleRandomPrompt = async () => {\n  if (editorRef.value) {\n    const { getRandomPrompt } = useRandomPrompt();\n    const prompt = await getRandomPrompt();\n    editorRef.value.clearEditor();\n    editorRef.value.addToEditor(prompt);\n    // Add random prompt to command history\n    editorRef.value.addToHistory(prompt);\n  }\n};\n\nconst handleMobileEvaluate = () => {\n  if (editorRef.value) {\n    const editor = editorRef.value.aceEditor();\n    if (editor) {\n      const selectedText = editor.getSelectedText();\n      const textToEvaluate = selectedText || editor.getValue();\n      if (textToEvaluate.trim()) {\n        startProcessing();\n        handleEvaluate(textToEvaluate);\n      } else {\n        error.value = \"Please enter some text to evaluate.\";\n      }\n    }\n  }\n};\n\n// Progress simulation\nlet progressInterval;\nconst startProgress = () => {\n  progress.value = 0;\n  progressInterval = setInterval(() => {\n    if (progress.value < 90) {\n      progress.value += Math.random() * 15;\n      if (progress.value > 90) progress.value = 90;\n    }\n  }, 1200);\n};\n\nconst completeProgress = () => {\n  clearInterval(progressInterval);\n  progress.value = 100;\n  setTimeout(() => {\n    progress.value = 0;\n  }, 500);\n};\n\n// Runtime configuration\nconst config = useRuntimeConfig();\nconst apiBase = ref(config.public.apiBase || \"https://soog.onrender.com/api\");\n\n// Handle evaluation of selected text\nconst handleEvaluate = async (selectedText) => {\n  if (!selectedText.trim()) {\n    error.value = \"Please select some text to evaluate.\";\n    return;\n  }\n};\n\nconst toggleTestEditor = () => {\n  navigateTo('/musicv-test');\n};\n</script>\n\n<style scoped>\n.app-container {\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  position: relative;\n}\n\n.settings {\n  position: fixed;\n  top: 10px;\n  right: 20px;\n  z-index: 100;\n  display: flex;\n  gap: 8px;\n}\n\n.icon-button {\n  background: transparent;\n  border: none;\n  color: white;\n  padding: 8px;\n  cursor: pointer;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: background-color 0.3s;\n}\n\n.icon-button:hover {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n.icon {\n  width: 24px;\n  height: 24px;\n}\n\n.plot-image {\n  cursor: pointer;\n  transition: transform 0.3s;\n}\n\n.plot-image:hover {\n  transform: scale(1.02);\n}\n\n.lightbox {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background: rgba(0, 0, 0, 0.9);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 2000;\n}\n\n.lightbox-image {\n  max-width: 80vw;\n  max-height: 80vh;\n  object-fit: contain;\n}\n\n.close-button {\n  position: absolute;\n  top: 20px;\n  right: 20px;\n  background: transparent;\n  border: none;\n  color: white;\n  cursor: pointer;\n  padding: 8px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: background-color 0.3s;\n}\n\n.close-button:hover {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n.footer {\n  position: fixed;\n  bottom: 0;\n  right: 0;\n  left: 0;\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  padding: 1rem;\n  gap: 1rem;\n  background: black !important;\n  z-index: 1000;\n}\n\n.loading {\n  margin-right: auto;\n}\n\n.mobile-evaluate-btn {\n  background: #4caf50;\n  color: white;\n  border: none;\n  padding: 8px 16px;\n  border-radius: 4px;\n  font-size: 14px;\n  cursor: pointer;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n  transition: background-color 0.3s;\n}\n\n.mobile-evaluate-btn:hover {\n  background: #45a049;\n}\n\n.mobile-evaluate-btn:active {\n  background: #3d8b40;\n  transform: translateY(1px);\n}\n\n.error {\n  position: fixed;\n  bottom: 60px;\n  left: 50%;\n  transform: translateX(-50%);\n  background: #ff5252;\n  color: white;\n  padding: 8px 16px;\n  border-radius: 4px;\n  z-index: 1000;\n}\n</style>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AACA,MAAM,gBAAgB;AACf,MAAM,cAAwD,MAAM;AAOzE,UAAQ,MAAM,aAAa;AAC7B;ACVuD,MAAe,aAAA,gBAAgB,UAAU;;;;;;;;;;;;;;;;;;;;;;;;;ACEzF,SAAS,aAAa;AACrB,QAAA,UAAU,IAA4B,IAAI;AAChD,MAAI,gBAAuC;AAC3C,MAAI,cAAqC;AAGzC,QAAM,cAAc,MAAM;AAChB,YAAA,QAAiB,SAAA,cAAc,mBAAmB;AACtD,QAAA,CAAC,QAAQ,OAAO;AACV,cAAA,QAAiB,SAAA,cAAc,MAAM;AAC7C,cAAQ,MAAM,OAAO;AACrB,cAAQ,MAAM,MAAM;AACX,MAAA,SAAA,KAAK,YAAY,QAAQ,KAAK;AAAA,IAAA;AAAA,EAE3C;AAGM,QAAA,gBAAgB,CAAC,UAAkB;AACjC,UAAA,SAAkB,SAAA,cAAc,QAAQ;AAC9C,WAAO,QAAQ;AACf,WAAO,SAAS;AACV,UAAA,MAAM,OAAO,WAAW,IAAI;AAC9B,QAAA,CAAC,IAAY,QAAA;AAIjB,QAAI,SAAS,GAAG,GAAG,IAAI,EAAE;AAGzB,QAAI,YAAY;AAChB,QAAI,cAAc;AAGZ,UAAA,eAAe,MAAM,MAAM,WAAW;AAC5C,UAAM,UAAU,eAAe,WAAW,aAAa,CAAC,CAAC,IAAI;AAC7D,UAAM,aAAa;AACb,UAAA,SAAS,cAAc,IAAI,WAAW;AAG5C,UAAM,UAAU;AAChB,UAAM,UAAU;AAChB,UAAM,UAAU;AAGhB,QAAI,UAAU;AACV,QAAA,IAAI,UAAU,UAAQ,GAAG,SAAS,QAAQ,GAAG,IAAI,KAAK,EAAE;AAC5D,QAAI,OAAO;AAGX,QAAI,UAAU;AACV,QAAA,IAAI,UAAU,UAAQ,GAAG,SAAS,QAAQ,GAAG,IAAI,KAAK,EAAE;AAC5D,QAAI,OAAO;AAEX,WAAO,OAAO,UAAU;AAAA,EAC1B;AAGA,QAAM,kBAAkB,MAAM;AAChB,gBAAA;AACR,QAAA,CAAC,QAAQ,MAAO;AAMhB,QAAA,6BAA6B,aAAa;AAC1C,QAAA,0BAA0B,WAAW;AAGzC,oBAAgB,YAmBX;AAAA,EACP;AAGA,QAAM,qBAAqB,MAAM;AAC3B,QAAA,CAAC,QAAQ,MAAO;AAGpB,QAAI,eAAe;AACjB,oBAAc,aAAa;AACX,sBAAA;AAAA,IAAA;AAIV,YAAA,MAAM,OAAO,cAAc,SAAS;AAIxC,QAAA,0BAA0B,WAAW;AAEzC,kBAAc,WAAW,MAAM;AACR,kBAchB;AAAA,OACJ,GAAG;AAAA,EACR;AAEO,SAAA;AAAA,IACL;AAAA,IACA;AAAA,EACF;AACF;;;;;ACSgD,eAAW;AACrD,UAAA,YAAY,IAAI,IAAI;AACpB,UAAA,UAAU,IAAI,KAAK;AACnB,UAAA,WAAW,IAAI,CAAC;AAChB,UAAA,QAAQ,IAAI,IAAI;AAChB,UAAA,YAAY,IAAI,IAAI;AACpB,UAAA,WAAW,IAAI,IAAI;AACnB,UAAA,WAAW,IAAI,KAAK;AACJ,QAAI,CAAC;AACrB,UAAA,mBAAmB,IAAI,KAAK;AAC5B,UAAA,eAAe,IAAI,KAAK;AAoF9B,UAAM,SAAS,iBAAiB;AAChB,QAAI,OAAO,OAAO,WAAW,+BAA+B;AAGtE,UAAA,iBAAiB,OAAO,iBAAiB;AACzC,UAAA,CAAC,aAAa,QAAQ;AACxB,cAAM,QAAQ;AACd;AAAA,MAAA;AAAA,IAEJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","x_google_ignoreList":[0]}