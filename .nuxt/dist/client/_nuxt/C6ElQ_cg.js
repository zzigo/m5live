import{r as s,H as oe,_ as Ke,I as Ze,o as Ye,J as ce,K as Je,t as d,x as l,L as S,z as H,A as W,T as Q,M as Le,N as xe,O as Se,P as X,Q as ee,R as te,S as qe,y as B,v,U as Ge}from"./Dh2qrhSG.js";import{M as We,u as Qe,A as ue,H as Xe,a as et}from"./Dt-ISclZ.js";import"./Dv6OuOwg.js";const Te=(y,C)=>{window.dispatchEvent(new CustomEvent(y,{detail:C}))};function tt(){const y=s([]),C=s(!1),M=()=>{try{const r=localStorage.getItem("m5live_codes");r?y.value=JSON.parse(r):Z(),C.value=!0}catch(r){console.error("Error loading codes from localStorage:",r),y.value=[],C.value=!0}},Z=async()=>{try{const r=await fetch("/data/codes.json");if(r.ok){const b=await r.json();y.value=b,T();return}const g=await fetch("/data/code.json");if(g.ok){const b=await g.json();y.value=b,T();return}y.value=[{title:"Simple Example",code:`INS 0 1;
OSC P5 P6 B2 F2 P30;
OUT B2 B1;
END;
GEN 0 1 2 0 0 .999 50 .999 205 -.999 306 -.999 461 0 511;
NOT 0 1 .50 125 8.45;
NOT .75 1 .17 250 8.45;
NOT 4.00 2 .50 500 8.46;
TER 8.00 ;`,year:2025,composer:"M5LIVE",comments:"A basic example to get started"}],T()}catch(r){console.error("Error loading default codes:",r)}},T=()=>{try{localStorage.setItem("m5live_codes",JSON.stringify(y.value))}catch(r){console.error("Error saving codes to localStorage:",r)}};oe(y,()=>{C.value&&T()},{deep:!0});const h=()=>{const r=JSON.stringify(y.value,null,2),g="data:application/json;charset=utf-8,"+encodeURIComponent(r),b=`m5live_codes_${new Date().toISOString().slice(0,10)}.json`,E=document.createElement("a");E.setAttribute("href",g),E.setAttribute("download",b),E.click()},O=r=>{const g=r.target;if(!g.files||g.files.length===0)return;const b=g.files[0],E=new FileReader;E.onload=P=>{var F;try{const j=(F=P.target)==null?void 0:F.result,R=JSON.parse(j);if(Array.isArray(R))y.value=R,T(),Te("m5live:import-success",{count:R.length});else throw new Error("Imported data is not an array")}catch(j){console.error("Error importing codes:",j),alert("Invalid JSON file. Please select a valid M5LIVE codes file."),Te("m5live:import-error",{error:"Invalid JSON file"})}},E.readAsText(b)};return{codes:y,loadCodes:M,saveCodes:T,exportCodes:h,importCodes:()=>{const r=document.createElement("input");r.type="file",r.accept="application/json",r.style.display="none",r.addEventListener("change",O),document.body.appendChild(r),r.click(),r.addEventListener("change",()=>{document.body.removeChild(r)})},isLoaded:C}}const ot={class:"app-container"},lt={class:"settings"},at=["title"],nt={key:0,class:"icon",viewBox:"0 0 24 24"},st={key:1,class:"icon",viewBox:"0 0 24 24"},rt={key:0,class:"current-title"},it=["title"],ct={class:"icon",viewBox:"0 0 24 24"},ut={key:0,fill:"currentColor",d:"M8,5.14V19.14L19,12.14L8,5.14Z"},dt={key:1,fill:"currentColor",d:"M18,18H6V6H18V18Z"},vt={key:0,class:"content-wrapper"},ft={class:"editor-container"},mt={key:0,class:"mini-oscilloscopes"},pt={class:"mini-oscilloscope-label"},gt=["src"],Ct=["src"],ht={class:"storage-menu-content"},wt={class:"left-panel"},yt={class:"entry-fields"},Et={class:"code-list"},kt=["onClick"],bt={class:"right-panel"},Lt={class:"code-actions"},xt={class:"footer"},St={key:0,class:"loading"},Tt={key:2,class:"error"},Vt={key:0,class:"notification"},Mt={key:3,class:"audio-download"},Ot=["href"],de=`
INS 0 1 ;
OSC P5 P6 B2 F2 P30;
OUT B2 B1;
END;
GEN 0 1 2 0 0 .999 50 .999 205 -.999 306 -.999 461 0 511;
NOT 0 1 .50 125 8.45;
NOT .75 1 .17 250 8.45;
NOT 4.00 2 .50 500 8.46;
TER 8.00 ;
`,At={__name:"index",setup(y){const C={debug:(t,e,...o)=>{I&&I.value&&console.debug(`[${t}]`,e,...o)},info:(t,e,...o)=>{console.info(`[${t}]`,e,...o)},warn:(t,e,...o)=>{console.warn(`[${t}]`,e,...o)},error:(t,e,...o)=>{console.error(`[${t}]`,e,...o)}},M=new We,{startProcessing:Z,completeProcessing:T}=Qe(),h=s(null),O=s(null),V=s(null),r=s(!1);s(0);const g=s(null),b=s(null),E=s(!0),P=s(!1),F=s(!1),j=s(0),R=s(!1),Y=s(!1),A=s(null),z=s([]),k=Ze({}),J=s(""),I=s(!1),_=s(!1),D=s(!0),{codes:L,loadCodes:Ve,saveCodes:ve,exportCodes:Me,importCodes:Oe}=tt(),fe=s({title:"",year:new Date().getFullYear(),composer:"",comments:"",code:""}),N=s(-1),c=s(null),w=s({...fe.value}),le=s(!1),ae=s(.7),ne=s(.3),me=s(0),pe=s(0),ge=s(0),q=s(""),U=s(!1),se=()=>{R.value=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)};Ye(async()=>{se(),window.addEventListener("resize",se),window.addEventListener("keydown",Ce);const t=o=>{const a=o.detail||{count:0};q.value=`Imported ${a.count} codes successfully!`,U.value=!0,setTimeout(()=>{U.value=!1},3e3)},e=o=>{const a=o.detail||{error:"Unknown error"};q.value=`Import failed: ${a.error}`,U.value=!0,setTimeout(()=>{U.value=!1},3e3)};window.addEventListener("m5live:import-success",t),window.addEventListener("m5live:import-error",e),await ce(),ie(),await Ve(),console.log("Setting default score in editor"),h.value?(h.value.addToEditor(de),console.log("Default score set in editor")):console.error("Score editor reference not available")}),Je(()=>{window.removeEventListener("resize",se),window.removeEventListener("keydown",Ce),window.removeEventListener("m5live:import-success",handleImportSuccess),window.removeEventListener("m5live:import-error",handleImportError),A.value&&URL.revokeObjectURL(A.value)});const Ce=t=>{if(t.ctrlKey||t.metaKey)switch(t.key.toLowerCase()){case"m":t.preventDefault(),G();break;case"e":if(t.preventDefault(),A.value){const e=document.createElement("a");e.href=A.value,e.download="m5live-audio.wav",e.click()}break;case"h":t.preventDefault(),we();break;case"p":t.preventDefault(),ie();break;case".":t.preventDefault(),_.value&&$();break}else if(t.altKey&&t.shiftKey)switch(t.key){case"ArrowLeft":t.preventDefault(),he(-1);break;case"ArrowRight":t.preventDefault(),he(1);break}ye(t)},he=t=>{var o;if(L.value.length===0)return;let e=N.value+t;e<0&&(e=L.value.length-1),e>=L.value.length&&(e=0),N.value=e,c.value=L.value[e],D.value=!1,K(),F.value&&V.value?V.value.addToEditor(c.value.code||""):(o=h.value)==null||o.addToEditor(c.value.code||""),J.value=c.value.title||"Untitled",setTimeout(()=>{J.value=""},4e3)},we=()=>{var t;return(t=h.value)==null?void 0:t.clearEditor()},Ae=()=>E.value=!E.value,G=()=>F.value=!F.value,Ie=async()=>{var a,n,u;const{randomizeScore:t}=et(),e=((n=(a=h.value)==null?void 0:a.aceEditor())==null?void 0:n.getValue())||de,o=t(e);D.value=!1,K(),(u=h.value)==null||u.addToEditor(o)},re=()=>{var o,a;const t=(o=h.value)==null?void 0:o.aceEditor(),e=t?t.getValue():"";if(console.log("Binary editor instance:",t),console.log("Binary editor text:",e),!e||!e.trim()){g.value="Please enter some text to evaluate.";return}r.value=!0,Z(),(a=O.value)==null||a.addTerminalOutput("musicV fortran binaries original render next"),r.value=!1,T()},$=async(t=null)=>{var n,u,m,f;if(_.value){console.log("Stopping playback..."),M.stop(),_.value=!1,r.value=!1,T();return}const e=(n=h.value)==null?void 0:n.aceEditor(),o=e?e.getValue():"",a=t??o;if(!a||typeof a!="string"||!a.trim()){console.error("No text to evaluate found in editor"),g.value="Please enter some text to evaluate.";return}D.value=!1,z.value=[],K(),Object.keys(k).forEach(p=>{delete k[p]}),r.value=!0,Z();try{(u=O.value)==null||u.clearTerminal(),M.parseScore(a);const p=M.getConsoleOutput();(m=O.value)==null||m.addTerminalOutput(p),await M.initAudio(),await M.play(),_.value=!0;const i=await M.generateSound(10),x=_e(i,44100);A.value&&URL.revokeObjectURL(A.value),A.value=URL.createObjectURL(x),await ce(),z.value=[...M.getFunctionTables()],D.value=!0}catch(p){console.error("Error during playback:",p),_.value=!1,g.value=p.message,(f=O.value)==null||f.addTerminalOutput(`Error: ${p.message}
`)}finally{r.value=!1,T()}};oe(z,t=>{Object.keys(k).forEach(o=>{const a=k[o];if(a){const n=a.getContext("2d");n&&n.clearRect(0,0,a.width,a.height)}});const e=t.map(o=>o.functionNum);Object.keys(k).forEach(o=>{e.includes(parseInt(o))||delete k[o]}),I.value&&C.debug("App",`Drawing ${t.length} oscilloscopes`),setTimeout(()=>t.forEach(Pe),0)},{deep:!0});const Ne=()=>{console.log("handleEvaluateTSFromMenu called, selectedCode:",c.value),c.value&&c.value.code?(console.log("Evaluating code from menu:",c.value.code),$(c.value.code)):(console.error("No code selected in menu"),g.value="No code selected to evaluate.")},ye=t=>{if(t.ctrlKey||t.metaKey)switch(t.key.toLowerCase()){case"enter":t.preventDefault(),re();break}else if(t.altKey)switch(t.key.toLowerCase()){case"enter":t.preventDefault(),$();break}},_e=(t,e)=>{const o=t.length*2,a=new ArrayBuffer(44+o),n=new DataView(a),u=(p,i)=>{for(let x=0;x<i.length;x++)n.setUint8(p+x,i.charCodeAt(x))};u(0,"RIFF"),n.setUint32(4,36+o,!0),u(8,"WAVE"),u(12,"fmt "),n.setUint32(16,16,!0),n.setUint16(20,1,!0),n.setUint16(22,1,!0),n.setUint32(24,e,!0),n.setUint32(28,e*2,!0),n.setUint16(32,2,!0),n.setUint16(34,16,!0),u(36,"data"),n.setUint32(40,o,!0);const m=.1;let f=44;for(let p=0;p<t.length;p++){const i=Math.max(-1,Math.min(1,t[p]*m)),x=i<0?i*32768:i*32767;n.setInt16(f,x,!0),f+=2}return new Blob([a],{type:"audio/wav"})},He=t=>{le.value=!0,me.value=t.clientY,pe.value=ae.value,ge.value=ne.value,document.addEventListener("mousemove",Ee),document.addEventListener("mouseup",ke),document.body.style.userSelect="none"},Ee=t=>{if(!le.value)return;const e=document.querySelector(".editor-container");if(!e)return;const o=e.clientHeight,n=(t.clientY-me.value)/o;let u=pe.value+n,m=ge.value-n;const f=.2;u<f?(u=f,m=1-f):m<f&&(m=f,u=1-f),ae.value=u,ne.value=m},ke=()=>{le.value=!1,document.removeEventListener("mousemove",Ee),document.removeEventListener("mouseup",ke),document.body.style.userSelect="",ce(()=>{var t,e;(t=h.value)==null||t.resize(),(e=O.value)==null||e.resize()})},ie=()=>{var t;(t=O.value)==null||t.clearTerminal()},Fe=()=>{L.value.push({...w.value}),w.value={title:"",year:new Date().getFullYear(),composer:"",comments:"",code:""},N.value=L.value.length-1,c.value=L.value[N.value],V.value&&V.value.addToEditor("")},De=async t=>{var e,o;if(t>=0&&c.value){const a=((o=(e=V.value)==null?void 0:e.aceEditor())==null?void 0:o.getValue())||"";L.value[t]={...w.value,code:a},await ve()}},Ue=async t=>{t>=0&&confirm("Delete this code?")&&(L.value.splice(t,1),N.value=-1,c.value=null,w.value={...fe.value},V.value&&V.value.addToEditor(""),await ve())},Be=t=>{var o;N.value=t,c.value=L.value[t],w.value={...c.value};const e=(o=V.value)==null?void 0:o.aceEditor();e&&e.setValue(c.value.code||"",-1)},Re=t=>{c.value&&(c.value.code=t,w.value.code=t)},$e=()=>{var t;c.value&&((t=h.value)==null||t.addToEditor(c.value.code||""),G(),K())},Pe=t=>{if(!t||!t.functionNum||!t.data||t.data.length===0){I.value&&C.warn("Oscilloscope",`Invalid function table data for F${(t==null?void 0:t.functionNum)||"unknown"}`);return}const e=k[t.functionNum];if(!e){I.value&&C.warn("Oscilloscope",`Canvas not found for function table F${t.functionNum}`);return}const o=e.getContext("2d");if(!o){I.value&&C.warn("Oscilloscope",`Could not get 2D context for canvas F${t.functionNum}`);return}I.value&&C.debug("Oscilloscope",`Drawing function table F${t.functionNum} with ${t.data.length} points`);const a=e.width,n=e.height,u=t.data;o.clearRect(0,0,a,n),o.fillStyle="#1a1a1a",o.fillRect(0,0,a,n),o.strokeStyle="#333333",o.lineWidth=.5;for(let i=0;i<=a;i+=a/4)o.beginPath(),o.moveTo(i,0),o.lineTo(i,n),o.stroke();for(let i=0;i<=n;i+=n/2)o.beginPath(),o.moveTo(0,i),o.lineTo(a,i),o.stroke();o.strokeStyle="#555555",o.beginPath(),o.moveTo(0,n/2),o.lineTo(a,n/2),o.stroke();let m=1/0,f=-1/0;for(let i=0;i<u.length;i++)m=Math.min(m,u[i]),f=Math.max(f,u[i]);m===f&&(m-=.5,f+=.5),o.strokeStyle="#00ff00",o.lineWidth=1.5,o.beginPath();const p=u.length;try{for(let i=0;i<p;i++){const x=i/(p-1)*a,be=(1-(u[i]-m)/(f-m))*n;i===0?o.moveTo(x,be):o.lineTo(x,be)}o.stroke(),o.fillStyle="#00ff00",o.font="9px monospace",o.fillText(`${f.toFixed(2)}`,2,8),o.fillText(`${m.toFixed(2)}`,2,n-2),o.fillText(`${p}p`,a-25,8)}catch(i){I.value&&C.error("Oscilloscope",`Error drawing oscilloscope for F${t.functionNum}:`,i)}},K=()=>{D.value=!1,Object.keys(k).forEach(t=>{const e=k[t];if(e){const o=e.getContext("2d");o&&(o.clearRect(0,0,e.width,e.height),o.fillStyle="#1a1a1a",o.fillRect(0,0,e.width,e.height))}}),Object.keys(k).forEach(t=>{delete k[t]}),z.value=[],I.value&&C.debug("App","Cleared all oscilloscopes")};oe(()=>{var t,e;return(e=(t=h.value)==null?void 0:t.aceEditor())==null?void 0:e.getValue()},()=>{D.value=!1,K()},{deep:!0}),oe(_,t=>{console.log("isPlaying changed to:",t)},{immediate:!0});const je=()=>{Me(),q.value="Codes exported successfully!",U.value=!0,setTimeout(()=>{U.value=!1},3e3)},ze=()=>{Oe()};return(t,e)=>(v(),d("div",ot,[l("div",lt,[l("button",{onClick:Ae,class:"icon-button",title:E.value?"Hide Code":"Show Code"},[E.value?(v(),d("svg",nt,e[12]||(e[12]=[l("path",{fill:"currentColor",d:"M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9M12,4.5C17,4.5 21.27,7.61 23,12C21.27,16.39 17,19.5 12,19.5C7,19.5 2.73,16.39 1,12C2.73,7.61 7,4.5 12,4.5M3.18,12C4.83,15.36 8.24,17.5 12,17.5C15.76,17.5 19.17,15.36 20.82,12C19.17,8.64 15.76,6.5 12,6.5C8.24,6.5 4.83,8.64 3.18,12Z"},null,-1)]))):(v(),d("svg",st,e[13]||(e[13]=[l("path",{fill:"currentColor",d:"M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z"},null,-1)]))),H(Q,{name:"title-fade"},{default:W(()=>[J.value?(v(),d("span",rt,B(J.value),1)):S("",!0)]),_:1})],8,at),l("button",{onClick:re,class:"icon-button",title:"Evaluate Binary (Ctrl+Enter)"},e[14]||(e[14]=[l("svg",{class:"icon",viewBox:"0 0 24 24"},[l("path",{fill:"currentColor",d:"M8,5.14V19.14L19,12.14L8,5.14Z"})],-1),l("span",{class:"f-subscript"},"F",-1)])),l("button",{onClick:$,class:"icon-button",title:_.value?"Stop Audio (Cmd+. or Ctrl+.)":"Evaluate TS (Alt+Enter)"},[(v(),d("svg",ct,[_.value?(v(),d("path",dt)):(v(),d("path",ut))])),e[15]||(e[15]=l("span",{class:"ts-subscript"},"TS",-1))],8,it),l("button",{onClick:we,class:"icon-button",title:"Clear Editor (Ctrl+H)"},e[16]||(e[16]=[l("svg",{class:"icon",viewBox:"0 0 24 24"},[l("path",{fill:"currentColor",d:"M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,21V6H20V4H15V3H9M7,6H17V19H7V6M9,8V17H11V8H9M13,8V17H15V8H13Z"})],-1)])),l("button",{onClick:Ie,class:"icon-button",title:"Randomize Score"},e[17]||(e[17]=[l("svg",{class:"icon",viewBox:"0 0 24 24"},[l("path",{fill:"currentColor",d:"M14.83,13.41L13.42,14.82L16.55,17.95L14.5,20H20V14.5L17.96,16.54L14.83,13.41M14.5,4L16.54,6.04L4,18.59L5.41,20L17.96,7.46L20,9.5V4M10.59,9.17L5.41,4L4,5.41L9.17,10.58L10.59,9.17Z"})],-1)])),l("button",{onClick:e[0]||(e[0]=o=>P.value=!0),class:"icon-button",title:"Help"},e[18]||(e[18]=[l("svg",{class:"icon",viewBox:"0 0 24 24"},[l("path",{fill:"currentColor",d:"M11,18H13V16H11V18M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,6A4,4 0 0,0 8,10H10A2,2 0 0,1 12,8A2,2 0 0,1 14,10C14,12 11,11.75 11,15H13C13,12.75 16,12.5 16,10A4,4 0 0,0 12,6Z"})],-1)])),l("button",{onClick:G,class:"icon-button",title:"Storage Menu (Ctrl+M)"},e[19]||(e[19]=[l("svg",{class:"icon",viewBox:"0 0 24 24"},[l("path",{fill:"currentColor",d:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"})],-1)]))]),E.value?(v(),d("div",vt,[l("div",ft,[l("div",{class:"score-editor",style:Le({flex:ae.value})},[H(ue,{ref_key:"scoreEditorRef",ref:h,mode:"editor",value:de,onEvaluate:re,onEvaluateTS:$,onKeydown:ye},null,512),D.value?(v(),d("div",mt,[(v(!0),d(xe,null,Se(z.value,(o,a)=>(v(),d("div",{key:`table-${o.functionNum}-${a}`,class:"mini-oscilloscope"},[l("div",pt,"F"+B(o.functionNum),1),l("canvas",{ref_for:!0,ref:n=>{n&&(k[o.functionNum]=n)},width:"80",height:"50",class:"mini-oscilloscope-canvas"},null,512)]))),128))])):S("",!0)],4),l("div",{class:"divider",onMousedown:He},null,32),l("div",{class:"console-editor",style:Le({flex:ne.value})},[l("div",{class:"console-header"},[l("button",{class:"clear-btn",onClick:ie,title:"Clear console (Ctrl+P)"},"🗑️")]),H(ue,{ref_key:"consoleEditorRef",ref:O,mode:"terminal"},null,512)],4)])])):S("",!0),H(Q,{"enter-active-class":"fadeIn","leave-active-class":"fadeOut",duration:3e3,mode:"out-in"},{default:W(()=>[b.value?(v(),d("div",{class:"plot-display",key:j.value},[l("img",{src:`data:image/png;base64,${b.value}`,alt:"Plot",onClick:e[1]||(e[1]=o=>Y.value=!0),class:"plot-image"},null,8,gt)])):S("",!0)]),_:1}),H(Q,{"enter-active-class":"fadeIn","leave-active-class":"fadeOut",duration:300},{default:W(()=>[Y.value?(v(),d("div",{key:0,class:"lightbox",onClick:e[4]||(e[4]=o=>Y.value=!1)},[l("button",{class:"close-button",onClick:e[2]||(e[2]=X(o=>Y.value=!1,["stop"]))},e[20]||(e[20]=[l("svg",{class:"icon",viewBox:"0 0 24 24"},[l("path",{fill:"currentColor",d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})],-1)])),l("img",{src:`data:image/png;base64,${b.value}`,alt:"Plot",class:"lightbox-image",onClick:e[3]||(e[3]=X(()=>{},["stop"]))},null,8,Ct)])):S("",!0)]),_:1}),F.value?(v(),d("div",{key:1,class:"storage-menu",onClick:X(G,["self"])},[l("div",ht,[l("div",wt,[l("div",yt,[l("form",{onSubmit:X(Fe,["prevent"])},[ee(l("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>w.value.title=o),placeholder:"Title",required:""},null,512),[[te,w.value.title]]),ee(l("input",{type:"number","onUpdate:modelValue":e[6]||(e[6]=o=>w.value.year=o),placeholder:"Year",required:""},null,512),[[te,w.value.year,void 0,{number:!0}]]),ee(l("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>w.value.composer=o),placeholder:"Composer",required:""},null,512),[[te,w.value.composer]]),ee(l("textarea",{"onUpdate:modelValue":e[8]||(e[8]=o=>w.value.comments=o),placeholder:"Comments",rows:"3",required:""},null,512),[[te,w.value.comments]]),e[21]||(e[21]=l("button",{type:"submit"},"Add",-1))],32)]),l("div",Et,[(v(!0),d(xe,null,Se(qe(L),(o,a)=>(v(),d("div",{key:a,class:Ge({selected:N.value===a}),onClick:n=>Be(a)},B(o.composer)+" - "+B(o.year)+" - "+B(o.title||"Untitled"),11,kt))),128))])]),l("div",bt,[H(ue,{ref_key:"codeEditorRef",ref:V,mode:"editor",value:c.value?c.value.code:"",onInput:Re},null,8,["value"]),l("div",Lt,[l("button",{onClick:Ne},"[ Play TS ]"),l("button",{onClick:$e},"[ To Editor ]"),l("button",{onClick:e[9]||(e[9]=o=>De(N.value))},"[ Update ]"),l("button",{onClick:e[10]||(e[10]=o=>Ue(N.value))},"[ Delete ]"),l("button",{onClick:je},"[ Export ]"),l("button",{onClick:ze},"[ Import ]")])])])])):S("",!0),l("div",xt,[r.value?(v(),d("div",St)):S("",!0),R.value?(v(),d("button",{key:1,onClick:$,class:"mobile-evaluate-btn",title:"Alt+Enter"},"Evaluate TS")):S("",!0)]),g.value?(v(),d("div",Tt,B(g.value),1)):S("",!0),H(Xe,{modelValue:P.value,"onUpdate:modelValue":e[11]||(e[11]=o=>P.value=o)},null,8,["modelValue"]),H(Q,{name:"fade"},{default:W(()=>[U.value?(v(),d("div",Vt,B(q.value),1)):S("",!0)]),_:1}),A.value?(v(),d("div",Mt,[l("a",{href:A.value,download:"m5live-audio.wav",class:"audio-download-link",title:"Download generated audio"},e[22]||(e[22]=[l("svg",{class:"icon",viewBox:"0 0 24 24"},[l("path",{fill:"currentColor",d:"M3,3v18h18V3H3z M7,17L7,7l2,0l0,4l2-2l2,2l0-4l2,0l0,10l-2,0l0-4l-2-2l-2,2l0,4L7,17z"})],-1)]),8,Ot)])):S("",!0)]))}},Ft=Ke(At,[["__scopeId","data-v-cb81841d"]]);export{Ft as default};
