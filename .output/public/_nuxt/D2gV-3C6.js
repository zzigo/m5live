var Z=Object.defineProperty;var X=(m,n,t)=>n in m?Z(m,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):m[n]=t;var $=(m,n,t)=>X(m,typeof n!="symbol"?n+"":n,t);import{r as J,g as ee}from"./Dv6OuOwg.js";import{_ as j,r as q,o as te,K as ne,t as H,v as B,x as l,U as oe,V as se,A as ae,L as re,B as v,P as ie,T as le}from"./CjfyPpWu.js";function ue(m,n){for(var t=0;t<n.length;t++){const s=n[t];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in m)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(m,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}))}var G=J();const ce=ee(G),pe=ue({__proto__:null,default:ce},[G]);var R={exports:{}},W;function de(){return W||(W=1,function(m,n){ace.define("ace/mode/python_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(t,s,r){var i=t("../lib/oop"),a=t("./text_highlight_rules").TextHighlightRules,e=function(){var o="and|as|assert|break|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|not|or|pass|print|raise|return|try|while|with|yield|async|await|nonlocal",u="True|False|None|NotImplemented|Ellipsis|__debug__",d="abs|divmod|input|open|staticmethod|all|enumerate|int|ord|str|any|eval|isinstance|pow|sum|basestring|execfile|issubclass|print|super|binfile|bin|iter|property|tuple|bool|filter|len|range|type|bytearray|float|list|raw_input|unichr|callable|format|locals|reduce|unicode|chr|frozenset|long|reload|vars|classmethod|getattr|map|repr|xrange|cmp|globals|max|reversed|zip|compile|hasattr|memoryview|round|__import__|complex|hash|min|apply|delattr|help|next|setattr|set|buffer|dict|hex|object|slice|coerce|dir|id|oct|sorted|intern|ascii|breakpoint|bytes",p=this.createKeywordMapper({"invalid.deprecated":"debugger","support.function":d,"variable.language":"self|cls","constant.language":u,keyword:o},"identifier"),c="[uU]?",h="[rR]",g="[fF]",f="(?:[rR][fF]|[fF][rR])",k="(?:(?:[1-9]\\d*)|(?:0))",A="(?:0[oO]?[0-7]+)",y="(?:0[xX][\\dA-Fa-f]+)",F="(?:0[bB][01]+)",I="(?:"+k+"|"+A+"|"+y+"|"+F+")",S="(?:[eE][+-]?\\d+)",M="(?:\\.\\d+)",b="(?:\\d+)",T="(?:(?:"+b+"?"+M+")|(?:"+b+"\\.))",E="(?:(?:"+T+"|"+b+")"+S+")",P="(?:"+E+"|"+T+")",C=`\\\\(x[0-9A-Fa-f]{2}|[0-7]{3}|[\\\\abfnrtv'"]|U[0-9A-Fa-f]{8}|u[0-9A-Fa-f]{4})`;this.$rules={start:[{token:"comment",regex:"#.*$"},{token:"string",regex:c+'"{3}',next:"qqstring3"},{token:"string",regex:c+'"(?=.)',next:"qqstring"},{token:"string",regex:c+"'{3}",next:"qstring3"},{token:"string",regex:c+"'(?=.)",next:"qstring"},{token:"string",regex:h+'"{3}',next:"rawqqstring3"},{token:"string",regex:h+'"(?=.)',next:"rawqqstring"},{token:"string",regex:h+"'{3}",next:"rawqstring3"},{token:"string",regex:h+"'(?=.)",next:"rawqstring"},{token:"string",regex:g+'"{3}',next:"fqqstring3"},{token:"string",regex:g+'"(?=.)',next:"fqqstring"},{token:"string",regex:g+"'{3}",next:"fqstring3"},{token:"string",regex:g+"'(?=.)",next:"fqstring"},{token:"string",regex:f+'"{3}',next:"rfqqstring3"},{token:"string",regex:f+'"(?=.)',next:"rfqqstring"},{token:"string",regex:f+"'{3}",next:"rfqstring3"},{token:"string",regex:f+"'(?=.)",next:"rfqstring"},{token:"keyword.operator",regex:"\\+|\\-|\\*|\\*\\*|\\/|\\/\\/|%|@|<<|>>|&|\\||\\^|~|<|>|<=|=>|==|!=|<>|="},{token:"punctuation",regex:",|:|;|\\->|\\+=|\\-=|\\*=|\\/=|\\/\\/=|%=|@=|&=|\\|=|^=|>>=|<<=|\\*\\*="},{token:"paren.lparen",regex:"[\\[\\(\\{]"},{token:"paren.rparen",regex:"[\\]\\)\\}]"},{token:["keyword","text","entity.name.function"],regex:"(def|class)(\\s+)([\\u00BF-\\u1FFF\\u2C00-\\uD7FF\\w]+)"},{token:"text",regex:"\\s+"},{include:"constants"}],qqstring3:[{token:"constant.language.escape",regex:C},{token:"string",regex:'"{3}',next:"start"},{defaultToken:"string"}],qstring3:[{token:"constant.language.escape",regex:C},{token:"string",regex:"'{3}",next:"start"},{defaultToken:"string"}],qqstring:[{token:"constant.language.escape",regex:C},{token:"string",regex:"\\\\$",next:"qqstring"},{token:"string",regex:'"|$',next:"start"},{defaultToken:"string"}],qstring:[{token:"constant.language.escape",regex:C},{token:"string",regex:"\\\\$",next:"qstring"},{token:"string",regex:"'|$",next:"start"},{defaultToken:"string"}],rawqqstring3:[{token:"string",regex:'"{3}',next:"start"},{defaultToken:"string"}],rawqstring3:[{token:"string",regex:"'{3}",next:"start"},{defaultToken:"string"}],rawqqstring:[{token:"string",regex:"\\\\$",next:"rawqqstring"},{token:"string",regex:'"|$',next:"start"},{defaultToken:"string"}],rawqstring:[{token:"string",regex:"\\\\$",next:"rawqstring"},{token:"string",regex:"'|$",next:"start"},{defaultToken:"string"}],fqqstring3:[{token:"constant.language.escape",regex:C},{token:"string",regex:'"{3}',next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],fqstring3:[{token:"constant.language.escape",regex:C},{token:"string",regex:"'{3}",next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],fqqstring:[{token:"constant.language.escape",regex:C},{token:"string",regex:"\\\\$",next:"fqqstring"},{token:"string",regex:'"|$',next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],fqstring:[{token:"constant.language.escape",regex:C},{token:"string",regex:"'|$",next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],rfqqstring3:[{token:"string",regex:'"{3}',next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],rfqstring3:[{token:"string",regex:"'{3}",next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],rfqqstring:[{token:"string",regex:"\\\\$",next:"rfqqstring"},{token:"string",regex:'"|$',next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],rfqstring:[{token:"string",regex:"'|$",next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],fqstringParRules:[{token:"paren.lparen",regex:"[\\[\\(]"},{token:"paren.rparen",regex:"[\\]\\)]"},{token:"string",regex:"\\s+"},{token:"string",regex:"'[^']*'"},{token:"string",regex:'"[^"]*"'},{token:"function.support",regex:"(!s|!r|!a)"},{include:"constants"},{token:"paren.rparen",regex:"}",next:"pop"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"}],constants:[{token:"constant.numeric",regex:"(?:"+P+"|\\d+)[jJ]\\b"},{token:"constant.numeric",regex:P},{token:"constant.numeric",regex:I+"[lL]\\b"},{token:"constant.numeric",regex:I+"\\b"},{token:["punctuation","function.support"],regex:"(\\.)([a-zA-Z_]+)\\b"},{token:p,regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"}]},this.normalizeRules()};i.inherits(e,a),s.PythonHighlightRules=e}),ace.define("ace/mode/folding/pythonic",["require","exports","module","ace/lib/oop","ace/mode/folding/fold_mode"],function(t,s,r){var i=t("../../lib/oop"),a=t("./fold_mode").FoldMode,e=s.FoldMode=function(o){this.foldingStartMarker=new RegExp("([\\[{])(?:\\s*)$|("+o+")(?:\\s*)(?:#.*)?$")};i.inherits(e,a),(function(){this.getFoldWidgetRange=function(o,u,d){var p=o.getLine(d),c=p.match(this.foldingStartMarker);if(c)return c[1]?this.openingBracketBlock(o,c[1],d,c.index):c[2]?this.indentationBlock(o,d,c.index+c[2].length):this.indentationBlock(o,d)}}).call(e.prototype)}),ace.define("ace/mode/python",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/python_highlight_rules","ace/mode/folding/pythonic","ace/range"],function(t,s,r){var i=t("../lib/oop"),a=t("./text").Mode,e=t("./python_highlight_rules").PythonHighlightRules,o=t("./folding/pythonic").FoldMode,u=t("../range").Range,d=function(){this.HighlightRules=e,this.foldingRules=new o("\\:"),this.$behaviour=this.$defaultBehaviour};i.inherits(d,a),(function(){this.lineCommentStart="#",this.$pairQuotesAfter={"'":/[ruf]/i,'"':/[ruf]/i},this.getNextLineIndent=function(c,h,g){var f=this.$getIndent(h),k=this.getTokenizer().getLineTokens(h,c),A=k.tokens;if(A.length&&A[A.length-1].type=="comment")return f;if(c=="start"){var y=h.match(/^.*[\{\(\[:]\s*$/);y&&(f+=g)}return f};var p={pass:1,return:1,raise:1,break:1,continue:1};this.checkOutdent=function(c,h,g){if(g!==`\r
`&&g!=="\r"&&g!==`
`)return!1;var f=this.getTokenizer().getLineTokens(h.trim(),c).tokens;if(!f)return!1;do var k=f.pop();while(k&&(k.type=="comment"||k.type=="text"&&k.value.match(/^\s+$/)));return k?k.type=="keyword"&&p[k.value]:!1},this.autoOutdent=function(c,h,g){g+=1;var f=this.$getIndent(h.getLine(g)),k=h.getTabString();f.slice(-k.length)==k&&h.remove(new u(g,f.length-k.length,g,f.length))},this.$id="ace/mode/python",this.snippetFileId="ace/snippets/python"}).call(d.prototype),s.Mode=d}),function(){ace.require(["ace/mode/python"],function(t){m&&(m.exports=t)})}()}(R)),R.exports}de();var V={exports:{}},z;function me(){return z||(z=1,function(m,n){(function(){ace.require(["ace/mode/text"],function(t){m&&(m.exports=t)})})()}(V)),V.exports}me();var L={exports:{}},U;function he(){return U||(U=1,function(m,n){ace.define("ace/theme/monokai-css",["require","exports","module"],function(t,s,r){r.exports=`.ace-monokai .ace_gutter {
  background: #2F3129;
  color: #8F908A
}

.ace-monokai .ace_print-margin {
  width: 1px;
  background: #555651
}

.ace-monokai {
  background-color: #272822;
  color: #F8F8F2
}

.ace-monokai .ace_cursor {
  color: #F8F8F0
}

.ace-monokai .ace_marker-layer .ace_selection {
  background: #49483E
}

.ace-monokai.ace_multiselect .ace_selection.ace_start {
  box-shadow: 0 0 3px 0px #272822;
}

.ace-monokai .ace_marker-layer .ace_step {
  background: rgb(102, 82, 0)
}

.ace-monokai .ace_marker-layer .ace_bracket {
  margin: -1px 0 0 -1px;
  border: 1px solid #49483E
}

.ace-monokai .ace_marker-layer .ace_active-line {
  background: #202020
}

.ace-monokai .ace_gutter-active-line {
  background-color: #272727
}

.ace-monokai .ace_marker-layer .ace_selected-word {
  border: 1px solid #49483E
}

.ace-monokai .ace_invisible {
  color: #52524d
}

.ace-monokai .ace_entity.ace_name.ace_tag,
.ace-monokai .ace_keyword,
.ace-monokai .ace_meta.ace_tag,
.ace-monokai .ace_storage {
  color: #F92672
}

.ace-monokai .ace_punctuation,
.ace-monokai .ace_punctuation.ace_tag {
  color: #fff
}

.ace-monokai .ace_constant.ace_character,
.ace-monokai .ace_constant.ace_language,
.ace-monokai .ace_constant.ace_numeric,
.ace-monokai .ace_constant.ace_other {
  color: #AE81FF
}

.ace-monokai .ace_invalid {
  color: #F8F8F0;
  background-color: #F92672
}

.ace-monokai .ace_invalid.ace_deprecated {
  color: #F8F8F0;
  background-color: #AE81FF
}

.ace-monokai .ace_support.ace_constant,
.ace-monokai .ace_support.ace_function {
  color: #66D9EF
}

.ace-monokai .ace_fold {
  background-color: #A6E22E;
  border-color: #F8F8F2
}

.ace-monokai .ace_storage.ace_type,
.ace-monokai .ace_support.ace_class,
.ace-monokai .ace_support.ace_type {
  font-style: italic;
  color: #66D9EF
}

.ace-monokai .ace_entity.ace_name.ace_function,
.ace-monokai .ace_entity.ace_other,
.ace-monokai .ace_entity.ace_other.ace_attribute-name,
.ace-monokai .ace_variable {
  color: #A6E22E
}

.ace-monokai .ace_variable.ace_parameter {
  font-style: italic;
  color: #FD971F
}

.ace-monokai .ace_string {
  color: #E6DB74
}

.ace-monokai .ace_comment {
  color: #75715E
}

.ace-monokai .ace_indent-guide {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ0FD0ZXBzd/wPAAjVAoxeSgNeAAAAAElFTkSuQmCC) right repeat-y
}

.ace-monokai .ace_indent-guide-active {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQIW2PQ1dX9zzBz5sz/ABCcBFFentLlAAAAAElFTkSuQmCC) right repeat-y;
}
`}),ace.define("ace/theme/monokai",["require","exports","module","ace/theme/monokai-css","ace/lib/dom"],function(t,s,r){s.isDark=!0,s.cssClass="ace-monokai",s.cssText=t("./monokai-css");var i=t("../lib/dom");i.importCssString(s.cssText,s.cssClass,!1)}),function(){ace.require(["ace/theme/monokai"],function(t){m&&(m.exports=t)})}()}(L)),L.exports}he();const ge={__name:"AceEditor",props:{mode:{type:String,default:"editor"},value:{type:String,default:""}},emits:["evaluate","evaluateTS","keydown","input"],setup(m,{expose:n,emit:t}){const s=pe,r=m,i=t,a=q(null),e=q(null),o=q(null),u=q(null),d=()=>{s.define("ace/mode/musicv",["require","exports","ace/lib/oop","ace/mode/text","ace/mode/musicv_highlight_rules"],(p,c)=>{const h=p("ace/lib/oop"),g=p("ace/mode/text").Mode,f=p("ace/mode/musicv_highlight_rules").MusicVHighlightRules,k=function(){this.HighlightRules=f};h.inherits(k,g),k.prototype.lineCommentStart="COM ",k.prototype.toggleCommentLines=function(A,y,F,I){const S=/^(?:\s*)(?:COM |COMMENT |COMMENT: )/;let M=!0;for(let b=F;b<=I;b++)if(!S.test(y.getLine(b))){M=!1;break}if(M)for(let b=F;b<=I;b++){const E=y.getLine(b).match(S);E&&y.replace(new s.Range(b,E.index,b,E[0].length),"")}else y.indentRows(F,I,"COM ")},c.Mode=k}),s.define("ace/mode/musicv_highlight_rules",["require","exports","ace/lib/oop","ace/mode/text_highlight_rules"],(p,c)=>{const h=p("ace/lib/oop"),g=p("ace/mode/text_highlight_rules").TextHighlightRules,f=function(){this.$rules={start:[{token:"comment",regex:"^\\s*(?:COM|COMMENT|COMMENT:)\\s.*$"},{token:"keyword.gen",regex:"\\b(GEN)\\b"},{token:"keyword",regex:"\\b(INS|OSC|OUT|END|NOT|TER)\\b"},{token:"constant.numeric",regex:"\\b[0-9]+(?:\\.[0-9]+)?\\b"}]},this.normalizeRules()};h.inherits(f,g),c.MusicVHighlightRules=f})};return te(()=>{if(console.log("Mounting AceEditor, ref:",a.value),!a.value){console.error("Editor ref not found");return}d(),o.value=s.edit(a.value,{theme:"ace/theme/monokai",mode:r.mode==="editor"?"ace/mode/musicv":"ace/mode/text",fontSize:r.mode==="terminal"?8:10,showPrintMargin:!1,highlightActiveLine:r.mode==="editor",readOnly:r.mode==="terminal",showGutter:r.mode==="editor",wrap:!0,fontFamily:"'Web437_IBM_MDA', monospace",value:r.value}),console.log("Ace Editor initialized:",o.value),r.mode==="editor"&&(o.value.commands.addCommand({name:"evaluateTS",bindKey:{win:"Alt-Enter",mac:"Alt-Enter"},exec:()=>i("evaluateTS",o.value.getValue())}),o.value.commands.addCommand({name:"evaluateBinary",bindKey:{win:"Ctrl-Enter",mac:"Ctrl-Enter"},exec:()=>i("evaluate",o.value.getValue())}),o.value.commands.removeCommand("gotoline"),o.value.commands.bindKey("ctrl-p",null),o.value.commands.bindKey("Alt-Shift-Left",null),o.value.commands.bindKey("Alt-Shift-Right",null),o.value.container.addEventListener("keydown",p=>i("keydown",p))),o.value.on("change",()=>i("input",o.value.getValue())),u.value=new ResizeObserver(()=>{var p;return(p=o.value)==null?void 0:p.resize()}),e.value&&u.value.observe(e.value)}),ne(()=>{u.value&&u.value.disconnect(),o.value&&o.value.destroy()}),n({addToEditor:p=>{var c;return(c=o.value)==null?void 0:c.setValue(p,-1)},addTerminalOutput:p=>{if(r.mode==="terminal"&&o.value){const c=o.value.getValue();o.value.setValue(c?`${c}
${p}`:p),o.value.navigateFileEnd()}},aceEditor:()=>o.value,resize:()=>{var p;return(p=o.value)==null?void 0:p.resize()},clearEditor:()=>{var p;return(p=o.value)==null?void 0:p.setValue("")},clearTerminal:()=>{var p;return r.mode==="terminal"&&((p=o.value)==null?void 0:p.setValue(""))}}),(p,c)=>(B(),H("div",{class:"ace-editor-container",ref_key:"editorContainer",ref:e},[l("div",{class:oe(["editor",{editor:m.mode==="editor",terminal:m.mode==="terminal"}]),ref_key:"editorRef",ref:a},null,2)],512))}},ye=j(ge,[["__scopeId","data-v-dd8afc48"]]),fe={class:"modal-header"},ke={__name:"HelpModal",props:{modelValue:Boolean},emits:["update:modelValue"],setup(m){return(n,t)=>(B(),se(le,{name:"modal"},{default:ae(()=>[m.modelValue?(B(),H("div",{key:0,class:"modal-overlay",onClick:t[2]||(t[2]=s=>n.$emit("update:modelValue",!1))},[l("div",{class:"modal-content",onClick:t[1]||(t[1]=ie(()=>{},["stop"]))},[l("div",fe,[t[3]||(t[3]=l("h2",null,"Welcome to M5LIVE",-1)),l("button",{class:"close-button",onClick:t[0]||(t[0]=s=>n.$emit("update:modelValue",!1))},"×")]),t[4]||(t[4]=l("div",{class:"modal-body"},[l("h3",null,"A LiveCoding Implementation of MUSIC V"),l("p",null," M5LIVE is a web-based environment that reimagines Max Mathews' influential MUSIC V software for modern use. This project, developed by Luciano Azzigotti and Nemanja Radivojević, bridges historical computer music practices with live-coding paradigms, providing a platform for real-time sound synthesis and performance. At its core, M5LIVE is a tribute to one of the foundational tools in electronic music history, while simultaneously being an open framework for creative experimentation. "),l("h4",null,"Technical Overview"),l("p",null," M5LIVE is a modern implementation of the MUSIC V system, enabling live coding of musical scores in the MUSIC V syntax. Built on Nuxt 3, it provides a web-based platform for sound synthesis and instrument design through code.This implementation translates the original MUSIC V architecture into a modern web context, preserving its core computational principles while enabling real-time interaction. A translation from fortran sources to WebAssembly is being done by Luciano Azzigotti during 2025. Future versions of this site will include this functionality in the second PLAY-F button. "),l("h4",null,"How It Works:"),l("ol",null,[l("li",null,"Write MUSIC V scores in the editor using the available operation codes."),l("li",null,"Use shortcuts to evaluate code and generate audio in real-time."),l("li",null,"Access stored scores via the storage menu for reuse and modification."),l("li",null,"Export generated audio as WAV files for external use.")]),l("h4",null,"Activated Commands:"),l("ul",null,[l("li",null,[l("strong",null,"Evaluate/Stop TS"),v(": "),l("kbd",null,"Alt + Enter"),v(" - Runs the selected or full score as TypeScript audio. When playing, changes to a stop button. Syntax: "),l("code",null,"INS <time> <duration>; OSC <params>; OUT <buffer>; END;")]),l("li",null,[l("strong",null,"Stop Playback"),v(": "),l("kbd",null,"Cmd + ."),v(" or "),l("kbd",null,"Ctrl + ."),v(" - Stops audio playback.")]),l("li",null,[l("strong",null,"Export WAV"),v(": "),l("kbd",null,"Ctrl + E"),v(" - Export audio as a WAV file.")]),l("li",null,[l("strong",null,"Clear Editor"),v(": "),l("kbd",null,"Ctrl + H"),v(" - Wipes the editor content.")]),l("li",null,[l("strong",null,"Clear Console"),v(": "),l("kbd",null,"Ctrl + P"),v(" - Clears the console output.")]),l("li",null,[l("strong",null,"Storage Menu"),v(": "),l("kbd",null,"Ctrl + M"),v(" - Opens the storage menu for saved codes.")]),l("li",null,[l("strong",null,"Navigate Codes"),v(": "),l("kbd",null,"Alt + Shift + ←/→"),v(" - Navigate between saved codes.")]),l("li",null,[l("strong",null,"Show/Hide Code"),v(": Click the eye icon - Toggles visibility of generated code.")]),l("li",null,[l("strong",null,"Mobile Evaluate"),v(': Tap "Evaluate" button - Triggers evaluation on mobile devices.')])]),l("h4",null,"Operation Codes (Currently Active):"),l("ul",null,[l("li",null,[l("strong",null,"INS"),v(" - Define instrument (Syntax: INS time duration)")]),l("li",null,[l("strong",null,"OSC"),v(" - Create oscillator (I1 I2 O F S Syntax: OSC amplitude frequency buffer function phase)")]),l("li",null,[l("strong",null,"OUT"),v(" - Monophonic Output")]),l("li",null,[l("strong",null,"END"),v(" - End instrument definition")]),l("li",null,[l("strong",null,"GEN"),v(" - Generate function table (Syntax: GEN function_number size values...)")]),l("li",null,[l("strong",null,"TER"),v(" - Terminate score")]),l("li",null,[l("strong",null,"AD2"),v(" - Two-inputs Adders with Data Statement: AD2 I1 I2 O ")]),l("li",null,[l("strong",null,"PLF"),v(" - Execute Subroutine in Pass I (P3 P)")])]),l("h4",null,"Future Implementations:"),l("ul",null,[l("li",null,[l("strong",null,"Unit Generators"),v(": RAN ENV STR AD3 AD4 MLT FLT RAH SET")]),l("li",null,[l("strong",null,"Visualize Waveform"),v(": "),l("kbd",null,"Ctrl + W"),v(" - Display real-time waveform of generated audio.")])]),l("p",{class:"tip"},[l("strong",null,"Tip:"),v(" Start with a simple score like "),l("code",null,"INS 0 1; OSC P5 P6 B2 F2 P30; OUT B2 B1; END;"),v(" to hear a basic oscillator output, then experiment with parameters. ")]),l("div",{class:"reference"},[l("h4",null,"Technical Implementation"),l("p",null," M5LIVE implements the core MUSIC V architecture in a modern web context, translating the original unit generator model into a real-time, browser-based synthesis engine. The implementation preserves the modular approach to sound synthesis while adding contemporary features like live coding and immediate audio feedback. ")]),l("div",{class:"credits"},[l("h4",null,"Academic Attribution"),l("p",null," M5LIVE is a research project exploring the implementation of historical computer music systems in modern web environments, developed as part of ongoing research in computer music and digital instrument design. ")])],-1))])])):re("",!0)]),_:1}))}},we=j(ke,[["__scopeId","data-v-930dbb4e"]]);function Ie(){function m(r){if(!r||typeof r!="string")return r;const i=r.split(`
`),a=[];for(let e of i){const o=e.trim();if(!o||o.startsWith("COM")||o.startsWith("COMMENT")){a.push(e);continue}if(o.startsWith("GEN")){a.push(n(e));continue}if(o.startsWith("NOT")){a.push(t(e));continue}a.push(e)}return a.join(`
`)}function n(r){const a=r.split(/\s+/).slice(0,3).join(" "),e=Math.floor(Math.random()*7)+2,o=[];o.push({time:0,value:Math.random()*2-1});for(let d=1;d<e-1;d++)o.push({time:Math.floor(d/(e-1)*511),value:Math.random()*2-1});o.push({time:511,value:Math.random()*2-1}),o.sort((d,p)=>d.time-p.time);const u=o.map(d=>`${d.value.toFixed(3)} ${d.time}`).join(" ");return`${a} ${u};`}function t(r){const a=r.split(/\s+/).slice(0,3).join(" "),e=(Math.random()*.5+.1).toFixed(2),o=Math.floor(Math.random()*1e3+100),u=(Math.random()*8+1).toFixed(2);return`${a} ${e} ${o} ${u};`}async function s(){try{const i=await(await fetch("/prompts.json")).json();return i[Math.floor(Math.random()*i.length)]}catch(r){return console.error("Error loading prompts:",r),"Imagine a novel musical instrument that combines traditional acoustics with objects from technic or nature..."}}return{getRandomPrompt:s,randomizeScore:m}}function Ae(){const m=q(null);let n=null,t=null;const s=()=>{m.value=document.querySelector("link[rel*='icon']"),m.value||(m.value=document.createElement("link"),m.value.type="image/x-icon",m.value.rel="shortcut icon",document.head.appendChild(m.value))},r=e=>{const o=document.createElement("canvas");o.width=32,o.height=32;const u=o.getContext("2d");if(!u)return"";u.fillRect(0,0,32,32),u.lineWidth=2.5,u.strokeStyle=e;const d=e.match(/[\d.]+\)$/),p=d?parseFloat(d[0]):1,h=Math.max(1,7+(1-p)*1.5),g=16,f=10,k=16;return u.beginPath(),u.arc(k-f/2,g,h,0,2*Math.PI),u.stroke(),u.beginPath(),u.arc(k+f/2,g,h,0,2*Math.PI),u.stroke(),o.toDataURL()};return{startProcessing:()=>{if(s(),!m.value)return;let e=1,o=!1;n&&clearInterval(n),t&&clearTimeout(t),n=setInterval(()=>{o?(e+=.1,e>=1&&(e=1,o=!1)):(e-=.1,e<=.3&&(e=.3,o=!0));const u=`rgba(200, 0, 0, ${e})`;m.value&&(m.value.href=r(u))},50)},completeProcessing:()=>{if(!m.value)return;n&&(clearInterval(n),n=null),m.value.href=r("#00ff00");let e=1;t&&clearTimeout(t),t=setTimeout(()=>{const o=setInterval(()=>{if(e-=.1,e<=0){clearInterval(o),m.value&&(m.value.href=r("#ffffff"));return}const u=`rgba(0, 255, 0, ${e})`;m.value&&(m.value.href=r(u))},50)},500)}}}class Fe{constructor(){$(this,"sampleRate",44100);$(this,"parameters",new Float32Array(1e3));$(this,"events",[]);$(this,"currentTime",0);$(this,"instruments",new Map);$(this,"functions",new Map);$(this,"currentInstrument",null);$(this,"audioContext",null);$(this,"workletNode",null);$(this,"consoleOutput","");$(this,"isServer",typeof globalThis.window>"u");$(this,"activeNotes",new Map);$(this,"pass2Report",[]);$(this,"globalVars",new Map);this.initDefaultFunctionTables(),this.isServer||this.setupKeyboardShortcuts()}initDefaultFunctionTables(){const n=new Float32Array(512);for(let s=0;s<512;s++)n[s]=Math.sin(2*Math.PI*s/512);this.functions.set(2,n);const t=new Float32Array(512);for(let s=0;s<512;s++)t[s]=s/512;this.functions.set(1,t)}setupKeyboardShortcuts(){document.addEventListener("keydown",n=>{(navigator.platform.toUpperCase().indexOf("MAC")>=0?n.metaKey&&n.key===".":n.ctrlKey&&n.key===".")&&(n.preventDefault(),this.stopAndReset())})}stopAndReset(){try{this.audioContext?(this.workletNode&&(this.workletNode.port.postMessage({type:"stop"}),this.workletNode.disconnect(),this.workletNode=null),this.audioContext.suspend().then(()=>{this.audioContext.close(),this.audioContext=null,this.activeNotes.clear(),this.events=[],this.currentTime=0,this.consoleOutput+=`MusicV stopped
`})):(this.activeNotes.clear(),this.events=[],this.currentTime=0,this.consoleOutput+=`MusicV stopped
`)}catch(n){console.error("Error during stop and reset:",n),this.consoleOutput+=`Error during stop and reset: ${n.message}
`}}parseScore(n){this.consoleOutput=`*** MUSIC V SCORE PROCESSING ***

`,this.events=[],this.instruments.clear(),this.pass2Report=[],this.activeNotes.clear(),this.globalVars.clear();const t=n.split(`
`);let s=-1;const r=new Map;for(let i=0;i<t.length;i++){const a=t[i];if(!a.trim()||a.trim().startsWith(";"))continue;if(a.trim().startsWith("COM")||a.trim().startsWith("COMMENT")){this.consoleOutput+=`Comment: ${a.trim().substring(a.indexOf(" ")+1)}
`;continue}const e=a.trim().split(/\s+/),o=e[0],u=`${o.padEnd(8)}${e.slice(1).map(d=>d.padEnd(9," ")).join("")}`;switch(this.pass2Report.push(u),o){case"INS":this.currentInstrument&&(this.consoleOutput+=`Instrument ${s} definition complete

`,r.set(s,this.currentInstrument.units.length),this.pass2Report.push(`       ${s}    ${this.currentInstrument.units.length}.000    0.000`)),parseFloat(e[1]),s=parseInt(e[2],10),this.currentInstrument={id:s,units:[],oscillators:[],outputs:[]},this.instruments.set(s,this.currentInstrument),this.consoleOutput+=`Defining Instrument ${s}
`;break;case"OSC":if(this.currentInstrument){const x=e[1],w=e[2],O=parseInt(e[3].substring(1),10),_=parseInt(e[4].substring(1),10),N=e[5]||"P30",Y=this.currentInstrument.oscillators.length+1;this.currentInstrument.oscillators.push({id:Y,type:1,freqParam:x,ampParam:w,outputBus:O,functionTable:_,phaseParam:N}),this.currentInstrument.units.push({type:"OSC",params:{freqParam:x,ampParam:w,outputBlock:O,functionNum:_,phaseParam:N}}),this.consoleOutput+=`  OSC: Freq=${x}, Amp=${w}, Out=B${O}, Func=F${_}, Phase=${N}
`}break;case"OUT":if(this.currentInstrument){const x=parseInt(e[1].substring(1),10),w=parseInt(e[2].substring(1),10);this.currentInstrument.outputs.push({inputBus:x,outputBus:w}),this.currentInstrument.units.push({type:"OUT",params:{inputBlock:x,outputBlock:w,amplitude:1}}),this.consoleOutput+=`  OUT: In=B${x}, Out=B${w}, Amp=1
`}break;case"AD2":if(this.currentInstrument){const x=e[1].startsWith("P")?e[1]:parseInt(e[1].substring(1),10),w=e[2].startsWith("P")?e[2]:parseInt(e[2].substring(1),10),O=parseInt(e[3].substring(1),10);this.currentInstrument.units.push({type:"AD2",params:{input1:x,input2:w,outputBlock:O}}),this.consoleOutput+=`  AD2: In1=${x}, In2=${w}, Out=B${O}
`}break;case"SET":if(this.currentInstrument){const x=e[1];this.currentInstrument.units.push({type:"SET",params:{param:x}}),this.consoleOutput+=`  SET: Param=${x}
`}break;case"MLT":if(this.currentInstrument){const x=e[1].startsWith("P")?e[1]:parseInt(e[1].substring(1),10),w=e[2].startsWith("P")?e[2]:parseInt(e[2].substring(1),10),O=parseInt(e[3].substring(1),10);this.currentInstrument.units.push({type:"MLT",params:{input1:x,input2:w,outputBlock:O}}),this.consoleOutput+=`  MLT: In1=${x}, In2=${w}, Out=B${O}
`}break;case"ENV":if(this.currentInstrument){const x=e[1],w=e[2],O=parseInt(e[3].substring(1),10),_=parseInt(e[4].substring(1),10),N=e[5]||"P30";this.currentInstrument.units.push({type:"ENV",params:{ampParam:x,durParam:w,outputBlock:O,functionNum:_,phaseParam:N}}),this.consoleOutput+=`  ENV: Amp=${x}, Dur=${w}, Out=B${O}, Func=F${_}, Phase=${N}
`}break;case"SIA":const d=parseFloat(e[1]),p=parseInt(e[2],10),c=parseInt(e[3],10);this.globalVars.set(p,c),p===4&&(this.sampleRate=c),this.events.push({type:"sia",time:d,varNum:p,value:c}),this.consoleOutput+=`SIA: Time=${d}, Var=${p}, Value=${c} (SampleRate=${this.sampleRate})
`;break;case"SV2":const h=parseFloat(e[1]),g=parseInt(e[2],10),f=parseFloat(e[3]);this.events.push({type:"sv2",time:h,varNum:g,value:f}),this.consoleOutput+=`SV2: Time=${h}, Var=P${g}, Value=${f}
`;break;case"END":this.currentInstrument&&(this.consoleOutput+=`Instrument ${s} definition complete

`,r.set(s,this.currentInstrument.units.length),this.currentInstrument=null);break;case"GEN":const k=parseInt(e[3],10),A=e.slice(4).map(x=>parseFloat(x));this.handleGenFunction(k,parseInt(e[1]),parseInt(e[2]),A),this.consoleOutput+=`GEN: Function=${k}, Params=${A.length}
`;break;case"NOT":const y=parseFloat(e[1]),F=parseInt(e[2],10),I=parseFloat(e[3]),S=parseFloat(e[4]),M=parseFloat(e[5]),b=e[6]?parseFloat(e[6]):void 0,T=e[7]?parseFloat(e[7]):void 0,E=e[8]?parseFloat(e[8]):void 0;this.events.push({type:"note",time:y,insNum:F,frequency:S,amplitude:I,duration:M,p6:b,p7:T,p8:E}),this.consoleOutput+=`NOTE: Time=${y}, Ins=${F}, Amp=${I}, Freq=${S}, Dur=${M}${b?`, P6=${b}`:""}${T?`, P7=${T}`:""}${E?`, P8=${E}`:""}
`;break;case"TER":const P=parseFloat(e[1]);this.events.push({type:"termination",time:P}),this.consoleOutput+=`Termination time: ${P}

`;break;case"PLF":const C=parseFloat(e[1]),D=parseInt(e[2],10),K=parseInt(e[3],10),Q=e.slice(4).map(x=>parseFloat(x));D===3?this.handlePLF3(C,K,Q,t,i):this.consoleOutput+=`PLF: Unsupported subroutine ${D} (only PLF3 implemented)
`;break;case"SV3":this.consoleOutput+=`SV3: Set variable in Pass III (not implemented)
`;break;case"SEC":this.consoleOutput+=`SEC: End section (not implemented)
`;break;case"SV1":this.consoleOutput+=`SV1: Set variable in Pass I (not implemented)
`;break;case"PLS":this.consoleOutput+=`PLS: Execute subroutine in Pass II (not implemented)
`;break;case"SI3":this.consoleOutput+=`SI3: Set integer in Pass III (not implemented)
`;break;case"RAN":this.consoleOutput+=`RAN: Random generator (not implemented)
`;break;case"STR":if(this.currentInstrument){const x=e[1].startsWith("B")?parseInt(e[1].substring(1),10):e[1],w=e[2],O=parseInt(e[3].substring(1),10);this.currentInstrument.units.push({type:"STR",params:{inputBlock:x,varParam:w,outputBlock:O}}),this.consoleOutput+=`  STR: In=${x}, Var=${w}, Out=B${O}
`}break;case"AD3":this.consoleOutput+=`AD3: Three-input adder (not implemented)
`;break;case"AD4":this.consoleOutput+=`AD4: Four-input adder (not implemented)
`;break;case"FLT":this.consoleOutput+=`FLT: Filter (not implemented)
`;break;case"RAH":this.consoleOutput+=`RAH: Random and hold (not implemented)
`;break;case"IOS":this.consoleOutput+=`IOS: Interpolating oscillator (not implemented)
`;break;default:this.consoleOutput+=`Unknown opcode: ${o} (skipped)
`}}this.events.sort((i,a)=>i.time-a.time),this.processPass2()}handlePLF3(n,t,s,r,i){const[a,e,o,u,d]=s;let p=null;for(let S=i+1;S<r.length;S++){const M=r[S].trim();if(M&&!M.startsWith(";")&&M.startsWith("NOT")){p=M;break}}if(!p){this.consoleOutput+=`PLF3: No following NOT card found at time ${n}
`;return}const c=p.split(/\s+/).map(S=>S.trim());parseFloat(c[1]);const h=parseInt(c[2],10),g=parseFloat(c[3]),f=parseFloat(c[4]),k=parseFloat(c[5]),A=c[6]?parseFloat(c[6]):void 0,y=c[7]?parseFloat(c[7]):void 0,F=c[8]?parseFloat(c[8]):void 0;let I=n;for(let S=0;S<a;S++){for(let M=0;M<e;M++){const b=M+1,T=A!==void 0?b*A:void 0,E=T!==void 0?T:k*b,P=h===1?h:2,C=u>0?f*u:f;this.events.push({type:"note",time:I,insNum:P,frequency:C,amplitude:g,duration:E,p6:T,p7:y,p8:F}),this.consoleOutput+=`PLF3: Generated note at ${I}, ins=${P}, freq=${C}, amp=${g}, dur=${E}${T?`, p6=${T}`:""}
`}I+=o}}processPass2(){this.consoleOutput+=`1PASS II REPORT
0(WORD CNT)
`,this.pass2Report.forEach(n=>this.consoleOutput+=`${n}
`),this.instruments.forEach((n,t)=>{this.consoleOutput+=`       ${t.toString().padStart(2)}    ${n.units.length.toFixed(3).padStart(6)}    0.000
`});for(const n of this.events)if(n.type==="sv2"){const{time:t,varNum:s,value:r}=n;for(const i of this.events)if(i.type==="note"&&i.time>=t){switch(s){case 5:i.frequency=r;break;case 6:i.p6=r;break;case 7:i.p7=r;break;case 8:i.p8=r;break;default:this.consoleOutput+=`SV2: Unsupported varNum P${s}
`;break}this.consoleOutput+=`SV2 applied at ${t}s: P${s}=${r} to note at ${i.time}s
`}}this.consoleOutput+=`END OF PASS II

Score processing complete
`}processOscillator(n,t,s,r){var y,F;const{freqParam:i,ampParam:a,outputBlock:e,functionNum:o,phaseParam:u}=n.params,d=i.startsWith("B")?((y=s.get(parseInt(i.substring(1))))==null?void 0:y[0])||0:t[i.toLowerCase()]||t.frequency||440,p=a.startsWith("B")?((F=s.get(parseInt(a.substring(1))))==null?void 0:F[0])||0:t[a.toLowerCase()]||t.amplitude||.5,c=this.functions.get(o)||this.functions.get(2);let h=s.get(e);if(h||(h=new Float32Array(2),s.set(e,h)),!t.oscState){const I=u.startsWith("P")&&t[u.toLowerCase()]||0;t.oscState={sum:I}}const g=c.length,f=d*g/this.sampleRate;t.oscState.sum+=f;const k=Math.floor(t.oscState.sum%(g-1)),A=c[k];h[0]=A*p}processOutput(n,t){var o;const{inputBlock:s,outputBlock:r,amplitude:i}=n.params,a=((o=t.get(s))==null?void 0:o[0])||0;let e=t.get(r);e||(e=new Float32Array(1),t.set(r,e)),e[0]+=a*i}processAd2(n,t,s){var p,c;const{input1:r,input2:i,outputBlock:a}=n.params,e=typeof r=="string"?t[r.toLowerCase()]||0:((p=s.get(r))==null?void 0:p[0])||0,o=typeof i=="string"?t[i.toLowerCase()]||0:((c=s.get(i))==null?void 0:c[0])||0,u=e+o;let d=s.get(a);d||(d=new Float32Array(1),s.set(a,d)),d[0]=u}processSet(n,t,s,r){const{param:i}=n.params,a=t[i.toLowerCase()]||0,e=r.findIndex(o=>o===n);for(let o=e+1;o<r.length;o++)if(r[o].type==="OSC"){r[o].params.functionNum=Math.floor(a)||r[o].params.functionNum;break}}processMlt(n,t,s){var p,c;const{input1:r,input2:i,outputBlock:a}=n.params,e=typeof r=="string"?t[r.toLowerCase()]||0:((p=s.get(r))==null?void 0:p[0])||0,o=typeof i=="string"?t[i.toLowerCase()]||0:((c=s.get(i))==null?void 0:c[0])||0,u=e*o;let d=s.get(a);d||(d=new Float32Array(1),s.set(a,d)),d[0]=u}processEnv(n,t,s,r){var y,F;const{ampParam:i,durParam:a,outputBlock:e,functionNum:o,phaseParam:u}=n.params,d=i.startsWith("B")?((y=s.get(parseInt(i.substring(1))))==null?void 0:y[0])||0:t[i.toLowerCase()]||t.amplitude||.5,p=a.startsWith("P")?t[a.toLowerCase()]||t.duration||1:((F=s.get(parseInt(a.substring(1))))==null?void 0:F[0])||t.duration||1,c=this.functions.get(o)||this.functions.get(2);let h=s.get(e);if(h||(h=new Float32Array(2),s.set(e,h)),!t.envState){const I=u.startsWith("P")&&t[u.toLowerCase()]||0;t.envState={time:I}}const g=r-t.startTime,f=Math.min(g/p,1),k=Math.floor(f*(c.length-1)),A=c[k];h[0]=A*d}processStr(n,t,s){var o;const{inputBlock:r,outputBlock:i}=n.params,a=((o=s.get(r))==null?void 0:o[0])||0;let e=s.get(i);e||(e=new Float32Array(1),s.set(i,e)),e[0]+=a}generateSample(n,t){var i;for(let a=2;a<=10;a++){const e=t.get(a);e&&e.fill(0)}for(const[a,e]of this.activeNotes.entries()){const o=e.startTime+e.duration;if(n>=e.startTime&&n<=o){const u=e.instrument;if(u&&u.units)for(const d of u.units)switch(d.type){case"OSC":this.processOscillator(d,e,t,n);break;case"OUT":this.processOutput(d,t);break;case"AD2":this.processAd2(d,e,t);break;case"SET":this.processSet(d,e,t,u.units);break;case"MLT":this.processMlt(d,e,t);break;case"ENV":this.processEnv(d,e,t,n);break;case"STR":this.processStr(d,e,t);break}}else n>o&&this.activeNotes.delete(a)}return(((i=t.get(1))==null?void 0:i[0])||0)*.5}async generateSound(n=8){try{const t=Math.floor(this.sampleRate*n),s=new Float32Array(t);this.currentTime=0;const r=new Map([[1,new Float32Array(1)]]);this.activeNotes.clear();const i=[...this.events];for(let a=0;a<t;a++){const e=a/this.sampleRate;for(;i.length>0&&i[0].time<=e;){const o=i.shift();this.processEvent(o,e)}s[a]=this.generateSample(e,r),this.currentTime=e}return s}catch(t){return console.error("Error generating sound:",t),this.consoleOutput+=`Error generating sound: ${t.message}
`,new Float32Array(0)}}processEvent(n,t){switch(n.type){case"note":const s=this.instruments.get(n.insNum);if(s){const r=Date.now()+Math.random(),i=JSON.parse(JSON.stringify(s));this.activeNotes.set(r,{instrument:i,startTime:t,duration:n.duration,frequency:n.frequency,amplitude:n.amplitude,p6:n.p6,p7:n.p7,p8:n.p8,p29:n.p29,p30:n.p30})}else this.consoleOutput+=`Error: Instrument ${n.insNum} not found
`;break;case"sia":this.globalVars.set(n.varNum,n.value),n.varNum===4&&(this.sampleRate=n.value);break;case"sv2":break;case"termination":this.activeNotes.clear();break}}async initAudio(){if(this.audioContext)this.audioContext.state==="suspended"&&await this.audioContext.resume();else try{if(this.isServer)throw new Error("Cannot initialize audio in server environment");this.audioContext=new AudioContext({sampleRate:this.sampleRate,latencyHint:"interactive"}),this.audioContext.state==="suspended"&&await this.audioContext.resume();const n=["/musicVWorklet.js","./musicVWorklet.js","../musicVWorklet.js","musicVWorklet.js"];let t=!1,s=null;for(const r of n){if(t)break;try{await this.audioContext.audioWorklet.addModule(r),t=!0}catch(i){console.warn(`Failed to load worklet from ${r}:`,i),s=i}}if(!t)throw new Error(`Failed to load worklet from any path: ${(s==null?void 0:s.message)||"Unknown error"}`);this.workletNode=new AudioWorkletNode(this.audioContext,"music-v-processor",{numberOfInputs:0,numberOfOutputs:1,outputChannelCount:[2],processorOptions:{sampleRate:this.sampleRate}}),this.workletNode.connect(this.audioContext.destination)}catch(n){throw console.error("Failed to initialize audio:",n),this.consoleOutput+=`Failed to initialize audio: ${n.message||"Unknown error"}
`,new Error(`Failed to initialize audio: ${n.message||"Unknown error"}`)}}async play(){try{if(this.audioContext||await this.initAudio(),!this.audioContext||!this.workletNode)throw new Error("Audio system not properly initialized");this.audioContext.state==="suspended"&&await this.audioContext.resume();let n=8;const t=this.events.find(s=>s.type==="termination");t&&(n=t.time),this.workletNode.port.postMessage({type:"play",events:this.events.map(s=>({...s})),currentTime:0,terminationTime:n}),this.consoleOutput+=`Audio playback started
`}catch(n){throw console.error("Failed to start audio playback:",n),this.consoleOutput+=`Failed to start audio playback: ${n.message||"Unknown error"}
`,new Error(`Failed to start audio playback: ${n.message||"Unknown error"}`)}}stop(){try{this.audioContext&&(this.workletNode&&this.workletNode.port.postMessage({type:"stop"}),this.audioContext.suspend(),this.consoleOutput+=`Audio playback stopped
`)}catch(n){console.error("Failed to stop audio playback:",n),this.consoleOutput+=`Failed to stop audio playback: ${n.message||"Unknown error"}
`}}handleGenFunction(n,t,s,r){const i=new Float32Array(512);if(t===0||t===1){const a=[];for(let e=0;e<r.length;e+=2){const o=r[e]||0,u=Math.floor(r[e+1]||(e===r.length-1?511:0));u>=0&&u<512&&(a.push({position:u,value:o}),this.consoleOutput+=`  Point: val=${o}, pos=${u}
`)}a.sort((e,o)=>e.position-o.position),a.length<2&&(a.length===0?(a.push({position:0,value:0}),a.push({position:511,value:0})):a.push({position:511,value:a[0].value}));for(let e=0;e<a.length-1;e++){const o=a[e],u=a[e+1],d=o.position,p=u.position,c=o.value,h=u.value;for(let g=d;g<=p;g++){const f=p===d?0:(g-d)/(p-d);i[g]=c*(1-f)+h*f}}this.consoleOutput+=`Function table ${n} created with ${a.length} points
`}else{for(let a=0;a<512;a++)i[a]=Math.sin(2*Math.PI*a/512);this.consoleOutput+=`Warning: GEN type ${t} not supported, using sine wave
`}if(s>0){let a=1/0,e=-1/0;for(let u=0;u<512;u++)a=Math.min(a,i[u]),e=Math.max(e,i[u]);let o=1;if(s===1?o=Math.max(Math.abs(a),Math.abs(e)):s===2&&(o=e-a),o!==0)for(let u=0;u<512;u++)s===1?i[u]/=o:s===2&&(i[u]=(i[u]-a)/o)}this.functions.set(n,i)}getConsoleOutput(){return this.consoleOutput}getFunctionTables(){return Array.from(this.functions.entries()).map(([n,t])=>({functionNum:n,data:Array.from(t)}))}}export{ye as A,we as H,Fe as M,Ie as a,Ae as u};
