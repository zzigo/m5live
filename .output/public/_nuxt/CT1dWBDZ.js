import{r,H as oe,_ as Ze,I as Ye,o as Je,J as ce,K as qe,t as d,x as l,L as x,z as H,A as W,T as Q,M as Se,N as xe,O as Te,P as X,Q as ee,R as te,S as Ge,y as B,v,U as We}from"./CjfyPpWu.js";import{M as Qe,u as Xe,A as ue,H as et,a as tt}from"./D2gV-3C6.js";import"./Dv6OuOwg.js";const Ve=(w,C)=>{window.dispatchEvent(new CustomEvent(w,{detail:C}))};function ot(){const w=r([]),C=r(!1),M=()=>{try{const i=localStorage.getItem("m5live_codes");i?w.value=JSON.parse(i):Y(),C.value=!0}catch(i){console.error("Error loading codes from localStorage:",i),w.value=[],C.value=!0}},Y=async()=>{try{const i=await fetch("/data/codes.json");if(i.ok){const b=await i.json();w.value=b,T();return}const g=await fetch("/data/code.json");if(g.ok){const b=await g.json();w.value=b,T();return}w.value=[{title:"Simple Example",code:`INS 0 1;
OSC P5 P6 B2 F2 P30;
OUT B2 B1;
END;
GEN 0 1 2 0 0 .999 50 .999 205 -.999 306 -.999 461 0 511;
NOT 0 1 .50 125 8.45;
NOT .75 1 .17 250 8.45;
NOT 4.00 2 .50 500 8.46;
TER 8.00 ;`,year:2025,composer:"M5LIVE",comments:"A basic example to get started"}],T()}catch(i){console.error("Error loading default codes:",i)}},T=()=>{try{localStorage.setItem("m5live_codes",JSON.stringify(w.value))}catch(i){console.error("Error saving codes to localStorage:",i)}};oe(w,()=>{C.value&&T()},{deep:!0});const p=()=>{const i=JSON.stringify(w.value,null,2),g="data:application/json;charset=utf-8,"+encodeURIComponent(i),b=`m5live_codes_${new Date().toISOString().slice(0,10)}.json`,y=document.createElement("a");y.setAttribute("href",g),y.setAttribute("download",b),y.click()},O=i=>{const g=i.target;if(!g.files||g.files.length===0)return;const b=g.files[0],y=new FileReader;y.onload=P=>{var F;try{const j=(F=P.target)==null?void 0:F.result,R=JSON.parse(j);if(Array.isArray(R))w.value=R,T(),Ve("m5live:import-success",{count:R.length});else throw new Error("Imported data is not an array")}catch(j){console.error("Error importing codes:",j),alert("Invalid JSON file. Please select a valid M5LIVE codes file."),Ve("m5live:import-error",{error:"Invalid JSON file"})}},y.readAsText(b)};return{codes:w,loadCodes:M,saveCodes:T,exportCodes:p,importCodes:()=>{const i=document.createElement("input");i.type="file",i.accept="application/json",i.style.display="none",i.addEventListener("change",O),document.body.appendChild(i),i.click(),i.addEventListener("change",()=>{document.body.removeChild(i)})},isLoaded:C}}const lt={class:"app-container"},at={class:"settings"},nt=["title"],st={key:0,class:"icon",viewBox:"0 0 24 24"},rt={key:1,class:"icon",viewBox:"0 0 24 24"},it={key:0,class:"current-title"},ct=["title"],ut={class:"icon",viewBox:"0 0 24 24"},dt={key:0,fill:"currentColor",d:"M8,5.14V19.14L19,12.14L8,5.14Z"},vt={key:1,fill:"currentColor",d:"M18,18H6V6H18V18Z"},ft={key:0,class:"content-wrapper"},mt={class:"editor-container"},pt={key:0,class:"mini-oscilloscopes"},gt={class:"mini-oscilloscope-label"},Ct=["src"],ht=["src"],wt={class:"storage-menu-content"},yt={class:"left-panel"},Et={class:"entry-fields"},kt={class:"code-list"},bt=["onClick"],Lt={class:"right-panel"},St={class:"code-actions"},xt={class:"footer"},Tt={key:0,class:"loading"},Vt={key:2,class:"error"},Mt={key:0,class:"notification"},Ot={key:3,class:"audio-download"},At=["href"],de=`
INS 0 1 ;
OSC P5 P6 B2 F2 P30;
OUT B2 B1;
END;
GEN 0 1 2 0 0 .999 50 .999 205 -.999 306 -.999 461 0 511;
NOT 0 1 .50 125 8.45;
NOT .75 1 .17 250 8.45;
NOT 4.00 2 .50 500 8.46;
TER 8.00 ;
`,It={__name:"index",setup(w){const C={debug:(t,e,...o)=>{I&&I.value&&console.debug(`[${t}]`,e,...o)},info:(t,e,...o)=>{console.info(`[${t}]`,e,...o)},warn:(t,e,...o)=>{console.warn(`[${t}]`,e,...o)},error:(t,e,...o)=>{console.error(`[${t}]`,e,...o)}},M=new Qe,{startProcessing:Y,completeProcessing:T}=Xe(),p=r(null),O=r(null),V=r(null),i=r(!1);r(0);const g=r(null),b=r(null),y=r(!0),P=r(!1),F=r(!1),j=r(0),R=r(!1),J=r(!1),A=r(null),z=r([]),E=Ye({}),q=r(""),I=r(!1),_=r(!1),D=r(!0),{codes:L,loadCodes:Me,saveCodes:ve,exportCodes:Oe,importCodes:Ae}=ot(),fe=r({title:"",year:new Date().getFullYear(),composer:"",comments:"",code:""}),N=r(-1),c=r(null),h=r({...fe.value}),le=r(!1),ae=r(.7),ne=r(.3),me=r(0),pe=r(0),ge=r(0),G=r(""),U=r(!1),se=()=>{R.value=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)};Je(async()=>{se(),window.addEventListener("resize",se),window.addEventListener("keydown",Ce);const t=o=>{const a=o.detail||{count:0};G.value=`Imported ${a.count} codes successfully!`,U.value=!0,setTimeout(()=>{U.value=!1},3e3)},e=o=>{const a=o.detail||{error:"Unknown error"};G.value=`Import failed: ${a.error}`,U.value=!0,setTimeout(()=>{U.value=!1},3e3)};window.addEventListener("m5live:import-success",t),window.addEventListener("m5live:import-error",e),await ce(),ie(),await Me(),console.log("Setting default score in editor"),p.value?(p.value.addToEditor(de),console.log("Default score set in editor")):console.error("Score editor reference not available")}),qe(()=>{window.removeEventListener("resize",se),window.removeEventListener("keydown",Ce),window.removeEventListener("m5live:import-success",handleImportSuccess),window.removeEventListener("m5live:import-error",handleImportError),A.value&&URL.revokeObjectURL(A.value)});const Ce=t=>{if(t.ctrlKey||t.metaKey)switch(t.key.toLowerCase()){case"m":t.preventDefault(),K();break;case"e":if(t.preventDefault(),A.value){const e=document.createElement("a");e.href=A.value,e.download="m5live-audio.wav",e.click()}break;case"h":t.preventDefault(),we();break;case"p":t.preventDefault(),ie();break;case".":t.preventDefault(),_.value&&$();break}else if(t.altKey&&t.shiftKey)switch(t.key){case"ArrowLeft":t.preventDefault(),he(-1);break;case"ArrowRight":t.preventDefault(),he(1);break}ye(t)},he=t=>{var o;if(L.value.length===0)return;let e=N.value+t;e<0&&(e=L.value.length-1),e>=L.value.length&&(e=0),N.value=e,c.value=L.value[e],D.value=!1,Z(),F.value&&V.value?V.value.addToEditor(c.value.code||""):(o=p.value)==null||o.addToEditor(c.value.code||""),q.value=c.value.title||"Untitled",setTimeout(()=>{q.value=""},4e3)},we=()=>{var t;return(t=p.value)==null?void 0:t.clearEditor()},Ie=()=>y.value=!y.value,K=()=>F.value=!F.value,Ne=async()=>{var a,n,u;const{randomizeScore:t}=tt(),e=((n=(a=p.value)==null?void 0:a.aceEditor())==null?void 0:n.getValue())||de,o=t(e);D.value=!1,Z(),(u=p.value)==null||u.addToEditor(o)},re=()=>{var o,a;const t=(o=p.value)==null?void 0:o.aceEditor(),e=t?t.getValue():"";if(console.log("Binary editor instance:",t),console.log("Binary editor text:",e),!e||!e.trim()){g.value="Please enter some text to evaluate.";return}i.value=!0,Y(),(a=O.value)==null||a.addTerminalOutput("musicV fortran binaries original render next"),i.value=!1,T()},$=async(t=null)=>{var n,u,m,f,k;if(_.value){console.log("Stopping playback..."),M.stop(),_.value=!1,i.value=!1,T();return}const e=(n=p.value)==null?void 0:n.aceEditor(),o=(u=e==null?void 0:e.getValue())==null?void 0:u.trim(),a=(t==null?void 0:t.trim())||o;if(!a){console.error("No text to evaluate found in editor"),g.value="Please enter some text to evaluate.";return}D.value=!1,z.value=[],Z(),Object.keys(E).forEach(s=>{delete E[s]}),i.value=!0,Y();try{(m=O.value)==null||m.clearTerminal(),M.parseScore(a);const s=M.getConsoleOutput();(f=O.value)==null||f.addTerminalOutput(s),await M.initAudio(44100),await M.play(),_.value=!0;const S=await M.generateSound(10,44100),be=He(S,44100);A.value&&URL.revokeObjectURL(A.value),A.value=URL.createObjectURL(be),await ce(),z.value=[...M.getFunctionTables()],D.value=!0}catch(s){console.error("Error during playback:",s),_.value=!1,g.value=s.message,(k=O.value)==null||k.addTerminalOutput(`Error: ${s.message}
`)}finally{i.value=!1,T()}};oe(z,t=>{Object.keys(E).forEach(o=>{const a=E[o];if(a){const n=a.getContext("2d");n&&n.clearRect(0,0,a.width,a.height)}});const e=t.map(o=>o.functionNum);Object.keys(E).forEach(o=>{e.includes(parseInt(o))||delete E[o]}),I.value&&C.debug("App",`Drawing ${t.length} oscilloscopes`),setTimeout(()=>t.forEach(je),0)},{deep:!0});const _e=()=>{var t;console.log("handleEvaluateTSFromMenu called, selectedCode:",c.value),c.value&&c.value.code?(console.log("Evaluating code from menu:",c.value.code),(t=p.value)==null||t.addToEditor(c.value.code||""),K(),setTimeout(()=>{$(c.value.code)},100)):(console.error("No code selected in menu"),g.value="No code selected to evaluate.")},ye=t=>{if(t.ctrlKey||t.metaKey)switch(t.key.toLowerCase()){case"enter":t.preventDefault(),re();break}else if(t.altKey)switch(t.key.toLowerCase()){case"enter":t.preventDefault(),$();break}},He=(t,e)=>{const o=t.length*2,a=new ArrayBuffer(44+o),n=new DataView(a),u=(k,s)=>{for(let S=0;S<s.length;S++)n.setUint8(k+S,s.charCodeAt(S))};u(0,"RIFF"),n.setUint32(4,36+o,!0),u(8,"WAVE"),u(12,"fmt "),n.setUint32(16,16,!0),n.setUint16(20,1,!0),n.setUint16(22,1,!0),n.setUint32(24,e,!0),n.setUint32(28,e*2,!0),n.setUint16(32,2,!0),n.setUint16(34,16,!0),u(36,"data"),n.setUint32(40,o,!0);const m=.1;let f=44;for(let k=0;k<t.length;k++){const s=Math.max(-1,Math.min(1,t[k]*m)),S=s<0?s*32768:s*32767;n.setInt16(f,S,!0),f+=2}return new Blob([a],{type:"audio/wav"})},Fe=t=>{le.value=!0,me.value=t.clientY,pe.value=ae.value,ge.value=ne.value,document.addEventListener("mousemove",Ee),document.addEventListener("mouseup",ke),document.body.style.userSelect="none"},Ee=t=>{if(!le.value)return;const e=document.querySelector(".editor-container");if(!e)return;const o=e.clientHeight,n=(t.clientY-me.value)/o;let u=pe.value+n,m=ge.value-n;const f=.2;u<f?(u=f,m=1-f):m<f&&(m=f,u=1-f),ae.value=u,ne.value=m},ke=()=>{le.value=!1,document.removeEventListener("mousemove",Ee),document.removeEventListener("mouseup",ke),document.body.style.userSelect="",ce(()=>{var t,e;(t=p.value)==null||t.resize(),(e=O.value)==null||e.resize()})},ie=()=>{var t;(t=O.value)==null||t.clearTerminal()},De=()=>{L.value.push({...h.value}),h.value={title:"",year:new Date().getFullYear(),composer:"",comments:"",code:""},N.value=L.value.length-1,c.value=L.value[N.value],V.value&&V.value.addToEditor("")},Ue=async t=>{var e,o;if(t>=0&&c.value){const a=((o=(e=V.value)==null?void 0:e.aceEditor())==null?void 0:o.getValue())||"";L.value[t]={...h.value,code:a},await ve()}},Be=async t=>{t>=0&&confirm("Delete this code?")&&(L.value.splice(t,1),N.value=-1,c.value=null,h.value={...fe.value},V.value&&V.value.addToEditor(""),await ve())},Re=t=>{var o;N.value=t,c.value=L.value[t],h.value={...c.value};const e=(o=V.value)==null?void 0:o.aceEditor();e&&e.setValue(c.value.code||"",-1)},$e=t=>{c.value&&(c.value.code=t,h.value.code=t)},Pe=()=>{var t;c.value&&((t=p.value)==null||t.addToEditor(c.value.code||""),K(),Z())},je=t=>{if(!t||!t.functionNum||!t.data||t.data.length===0){I.value&&C.warn("Oscilloscope",`Invalid function table data for F${(t==null?void 0:t.functionNum)||"unknown"}`);return}const e=E[t.functionNum];if(!e){I.value&&C.warn("Oscilloscope",`Canvas not found for function table F${t.functionNum}`);return}const o=e.getContext("2d");if(!o){I.value&&C.warn("Oscilloscope",`Could not get 2D context for canvas F${t.functionNum}`);return}I.value&&C.debug("Oscilloscope",`Drawing function table F${t.functionNum} with ${t.data.length} points`);const a=e.width,n=e.height,u=t.data;o.clearRect(0,0,a,n),o.fillStyle="#1a1a1a",o.fillRect(0,0,a,n),o.strokeStyle="#333333",o.lineWidth=.5;for(let s=0;s<=a;s+=a/4)o.beginPath(),o.moveTo(s,0),o.lineTo(s,n),o.stroke();for(let s=0;s<=n;s+=n/2)o.beginPath(),o.moveTo(0,s),o.lineTo(a,s),o.stroke();o.strokeStyle="#555555",o.beginPath(),o.moveTo(0,n/2),o.lineTo(a,n/2),o.stroke();let m=1/0,f=-1/0;for(let s=0;s<u.length;s++)m=Math.min(m,u[s]),f=Math.max(f,u[s]);m===f&&(m-=.5,f+=.5),o.strokeStyle="#00ff00",o.lineWidth=1.5,o.beginPath();const k=u.length;try{for(let s=0;s<k;s++){const S=s/(k-1)*a,Le=(1-(u[s]-m)/(f-m))*n;s===0?o.moveTo(S,Le):o.lineTo(S,Le)}o.stroke(),o.fillStyle="#00ff00",o.font="9px monospace",o.fillText(`${f.toFixed(2)}`,2,8),o.fillText(`${m.toFixed(2)}`,2,n-2),o.fillText(`${k}p`,a-25,8)}catch(s){I.value&&C.error("Oscilloscope",`Error drawing oscilloscope for F${t.functionNum}:`,s)}},Z=()=>{D.value=!1,Object.keys(E).forEach(t=>{const e=E[t];if(e){const o=e.getContext("2d");o&&(o.clearRect(0,0,e.width,e.height),o.fillStyle="#1a1a1a",o.fillRect(0,0,e.width,e.height))}}),Object.keys(E).forEach(t=>{delete E[t]}),z.value=[],I.value&&C.debug("App","Cleared all oscilloscopes")};oe(()=>{var t,e;return(e=(t=p.value)==null?void 0:t.aceEditor())==null?void 0:e.getValue()},()=>{D.value=!1,Z()},{deep:!0}),oe(_,t=>{console.log("isPlaying changed to:",t)},{immediate:!0});const ze=()=>{Oe(),G.value="Codes exported successfully!",U.value=!0,setTimeout(()=>{U.value=!1},3e3)},Ke=()=>{Ae()};return(t,e)=>(v(),d("div",lt,[l("div",at,[l("button",{onClick:Ie,class:"icon-button",title:y.value?"Hide Code":"Show Code"},[y.value?(v(),d("svg",st,e[12]||(e[12]=[l("path",{fill:"currentColor",d:"M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9M12,4.5C17,4.5 21.27,7.61 23,12C21.27,16.39 17,19.5 12,19.5C7,19.5 2.73,16.39 1,12C2.73,7.61 7,4.5 12,4.5M3.18,12C4.83,15.36 8.24,17.5 12,17.5C15.76,17.5 19.17,15.36 20.82,12C19.17,8.64 15.76,6.5 12,6.5C8.24,6.5 4.83,8.64 3.18,12Z"},null,-1)]))):(v(),d("svg",rt,e[13]||(e[13]=[l("path",{fill:"currentColor",d:"M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z"},null,-1)]))),H(Q,{name:"title-fade"},{default:W(()=>[q.value?(v(),d("span",it,B(q.value),1)):x("",!0)]),_:1})],8,nt),l("button",{onClick:re,class:"icon-button",title:"Evaluate Binary (Ctrl+Enter)"},e[14]||(e[14]=[l("svg",{class:"icon",viewBox:"0 0 24 24"},[l("path",{fill:"currentColor",d:"M8,5.14V19.14L19,12.14L8,5.14Z"})],-1),l("span",{class:"f-subscript"},"F",-1)])),l("button",{onClick:$,class:"icon-button",title:_.value?"Stop Audio (Cmd+. or Ctrl+.)":"Evaluate TS (Alt+Enter)"},[(v(),d("svg",ut,[_.value?(v(),d("path",vt)):(v(),d("path",dt))])),e[15]||(e[15]=l("span",{class:"ts-subscript"},"TS",-1))],8,ct),l("button",{onClick:we,class:"icon-button",title:"Clear Editor (Ctrl+H)"},e[16]||(e[16]=[l("svg",{class:"icon",viewBox:"0 0 24 24"},[l("path",{fill:"currentColor",d:"M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,21V6H20V4H15V3H9M7,6H17V19H7V6M9,8V17H11V8H9M13,8V17H15V8H13Z"})],-1)])),l("button",{onClick:Ne,class:"icon-button",title:"Randomize Score"},e[17]||(e[17]=[l("svg",{class:"icon",viewBox:"0 0 24 24"},[l("path",{fill:"currentColor",d:"M14.83,13.41L13.42,14.82L16.55,17.95L14.5,20H20V14.5L17.96,16.54L14.83,13.41M14.5,4L16.54,6.04L4,18.59L5.41,20L17.96,7.46L20,9.5V4M10.59,9.17L5.41,4L4,5.41L9.17,10.58L10.59,9.17Z"})],-1)])),l("button",{onClick:e[0]||(e[0]=o=>P.value=!0),class:"icon-button",title:"Help"},e[18]||(e[18]=[l("svg",{class:"icon",viewBox:"0 0 24 24"},[l("path",{fill:"currentColor",d:"M11,18H13V16H11V18M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,6A4,4 0 0,0 8,10H10A2,2 0 0,1 12,8A2,2 0 0,1 14,10C14,12 11,11.75 11,15H13C13,12.75 16,12.5 16,10A4,4 0 0,0 12,6Z"})],-1)])),l("button",{onClick:K,class:"icon-button",title:"Storage Menu (Ctrl+M)"},e[19]||(e[19]=[l("svg",{class:"icon",viewBox:"0 0 24 24"},[l("path",{fill:"currentColor",d:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"})],-1)]))]),y.value?(v(),d("div",ft,[l("div",mt,[l("div",{class:"score-editor",style:Se({flex:ae.value})},[H(ue,{ref_key:"scoreEditorRef",ref:p,mode:"editor",value:de,onEvaluate:re,onEvaluateTS:$,onKeydown:ye},null,512),D.value?(v(),d("div",pt,[(v(!0),d(xe,null,Te(z.value,(o,a)=>(v(),d("div",{key:`table-${o.functionNum}-${a}`,class:"mini-oscilloscope"},[l("div",gt,"F"+B(o.functionNum),1),l("canvas",{ref_for:!0,ref:n=>{n&&(E[o.functionNum]=n)},width:"80",height:"50",class:"mini-oscilloscope-canvas"},null,512)]))),128))])):x("",!0)],4),l("div",{class:"divider",onMousedown:Fe},null,32),l("div",{class:"console-editor",style:Se({flex:ne.value})},[l("div",{class:"console-header"},[l("button",{class:"clear-btn",onClick:ie,title:"Clear console (Ctrl+P)"},"ðŸ—‘ï¸")]),H(ue,{ref_key:"consoleEditorRef",ref:O,mode:"terminal"},null,512)],4)])])):x("",!0),H(Q,{"enter-active-class":"fadeIn","leave-active-class":"fadeOut",duration:3e3,mode:"out-in"},{default:W(()=>[b.value?(v(),d("div",{class:"plot-display",key:j.value},[l("img",{src:`data:image/png;base64,${b.value}`,alt:"Plot",onClick:e[1]||(e[1]=o=>J.value=!0),class:"plot-image"},null,8,Ct)])):x("",!0)]),_:1}),H(Q,{"enter-active-class":"fadeIn","leave-active-class":"fadeOut",duration:300},{default:W(()=>[J.value?(v(),d("div",{key:0,class:"lightbox",onClick:e[4]||(e[4]=o=>J.value=!1)},[l("button",{class:"close-button",onClick:e[2]||(e[2]=X(o=>J.value=!1,["stop"]))},e[20]||(e[20]=[l("svg",{class:"icon",viewBox:"0 0 24 24"},[l("path",{fill:"currentColor",d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})],-1)])),l("img",{src:`data:image/png;base64,${b.value}`,alt:"Plot",class:"lightbox-image",onClick:e[3]||(e[3]=X(()=>{},["stop"]))},null,8,ht)])):x("",!0)]),_:1}),F.value?(v(),d("div",{key:1,class:"storage-menu",onClick:X(K,["self"])},[l("div",wt,[l("div",yt,[l("div",Et,[l("form",{onSubmit:X(De,["prevent"])},[ee(l("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>h.value.title=o),placeholder:"Title",required:""},null,512),[[te,h.value.title]]),ee(l("input",{type:"number","onUpdate:modelValue":e[6]||(e[6]=o=>h.value.year=o),placeholder:"Year",required:""},null,512),[[te,h.value.year,void 0,{number:!0}]]),ee(l("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>h.value.composer=o),placeholder:"Composer",required:""},null,512),[[te,h.value.composer]]),ee(l("textarea",{"onUpdate:modelValue":e[8]||(e[8]=o=>h.value.comments=o),placeholder:"Comments",rows:"3",required:""},null,512),[[te,h.value.comments]]),e[21]||(e[21]=l("button",{type:"submit"},"Add",-1))],32)]),l("div",kt,[(v(!0),d(xe,null,Te(Ge(L),(o,a)=>(v(),d("div",{key:a,class:We({selected:N.value===a}),onClick:n=>Re(a)},B(o.composer)+" - "+B(o.year)+" - "+B(o.title||"Untitled"),11,bt))),128))])]),l("div",Lt,[H(ue,{ref_key:"codeEditorRef",ref:V,mode:"editor",value:c.value?c.value.code:"",onInput:$e},null,8,["value"]),l("div",St,[l("button",{onClick:_e},"[ Play TS ]"),l("button",{onClick:Pe},"[ To Editor ]"),l("button",{onClick:e[9]||(e[9]=o=>Ue(N.value))},"[ Update ]"),l("button",{onClick:e[10]||(e[10]=o=>Be(N.value))},"[ Delete ]"),l("button",{onClick:ze},"[ Export ]"),l("button",{onClick:Ke},"[ Import ]")])])])])):x("",!0),l("div",xt,[i.value?(v(),d("div",Tt)):x("",!0),R.value?(v(),d("button",{key:1,onClick:$,class:"mobile-evaluate-btn",title:"Alt+Enter"},"Evaluate TS")):x("",!0)]),g.value?(v(),d("div",Vt,B(g.value),1)):x("",!0),H(et,{modelValue:P.value,"onUpdate:modelValue":e[11]||(e[11]=o=>P.value=o)},null,8,["modelValue"]),H(Q,{name:"fade"},{default:W(()=>[U.value?(v(),d("div",Mt,B(G.value),1)):x("",!0)]),_:1}),A.value?(v(),d("div",Ot,[l("a",{href:A.value,download:"m5live-audio.wav",class:"audio-download-link",title:"Download generated audio"},e[22]||(e[22]=[l("svg",{class:"icon",viewBox:"0 0 24 24"},[l("path",{fill:"currentColor",d:"M3,3v18h18V3H3z M7,17L7,7l2,0l0,4l2-2l2,2l0-4l2,0l0,10l-2,0l0-4l-2-2l-2,2l0,4L7,17z"})],-1)]),8,At)])):x("",!0)]))}},Ft=Ze(It,[["__scopeId","data-v-6a7ff162"]]);export{Ft as default};
