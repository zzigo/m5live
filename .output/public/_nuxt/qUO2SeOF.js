import{r,H as oe,_ as Ye,I as Je,o as qe,J as ce,K as Ge,t as d,x as l,L as S,z as H,A as W,T as Q,M as xe,N as Se,O as Te,P as X,Q as ee,R as te,S as We,y as B,v,U as Qe}from"./DGdvEF_K.js";import{M as Ve,u as Xe,A as ue,H as et,a as tt}from"./BwSQiu4a.js";import"./Dv6OuOwg.js";const Me=(h,g)=>{window.dispatchEvent(new CustomEvent(h,{detail:g}))};function ot(){const h=r([]),g=r(!1),O=()=>{try{const i=localStorage.getItem("m5live_codes");i?h.value=JSON.parse(i):Z(),g.value=!0}catch(i){console.error("Error loading codes from localStorage:",i),h.value=[],g.value=!0}},Z=async()=>{try{const i=await fetch("/data/codes.json");if(i.ok){const b=await i.json();h.value=b,T();return}const p=await fetch("/data/code.json");if(p.ok){const b=await p.json();h.value=b,T();return}h.value=[{title:"Simple Example",code:`INS 0 1;
OSC P5 P6 B2 F2 P30;
OUT B2 B1;
END;
GEN 0 1 2 0 0 .999 50 .999 205 -.999 306 -.999 461 0 511;
NOT 0 1 .50 125 8.45;
NOT .75 1 .17 250 8.45;
NOT 4.00 2 .50 500 8.46;
TER 8.00 ;`,year:2025,composer:"M5LIVE",comments:"A basic example to get started"}],T()}catch(i){console.error("Error loading default codes:",i)}},T=()=>{try{localStorage.setItem("m5live_codes",JSON.stringify(h.value))}catch(i){console.error("Error saving codes to localStorage:",i)}};oe(h,()=>{g.value&&T()},{deep:!0});const C=()=>{const i=JSON.stringify(h.value,null,2),p="data:application/json;charset=utf-8,"+encodeURIComponent(i),b=`m5live_codes_${new Date().toISOString().slice(0,10)}.json`,y=document.createElement("a");y.setAttribute("href",p),y.setAttribute("download",b),y.click()},V=i=>{const p=i.target;if(!p.files||p.files.length===0)return;const b=p.files[0],y=new FileReader;y.onload=R=>{var F;try{const $=(F=R.target)==null?void 0:F.result,P=JSON.parse($);if(Array.isArray(P))h.value=P,T(),Me("m5live:import-success",{count:P.length});else throw new Error("Imported data is not an array")}catch($){console.error("Error importing codes:",$),alert("Invalid JSON file. Please select a valid M5LIVE codes file."),Me("m5live:import-error",{error:"Invalid JSON file"})}},y.readAsText(b)};return{codes:h,loadCodes:O,saveCodes:T,exportCodes:C,importCodes:()=>{const i=document.createElement("input");i.type="file",i.accept="application/json",i.style.display="none",i.addEventListener("change",V),document.body.appendChild(i),i.click(),i.addEventListener("change",()=>{document.body.removeChild(i)})},isLoaded:g}}const lt={class:"app-container"},at={class:"settings"},nt=["title"],st={key:0,class:"icon",viewBox:"0 0 24 24"},rt={key:1,class:"icon",viewBox:"0 0 24 24"},it={key:0,class:"current-title"},ct=["title"],ut={class:"icon",viewBox:"0 0 24 24"},dt={key:0,fill:"currentColor",d:"M8,5.14V19.14L19,12.14L8,5.14Z"},vt={key:1,fill:"currentColor",d:"M18,18H6V6H18V18Z"},ft={key:0,class:"content-wrapper"},mt={class:"editor-container"},pt={key:0,class:"mini-oscilloscopes"},gt={class:"mini-oscilloscope-label"},Ct=["src"],wt=["src"],ht={class:"storage-menu-content"},yt={class:"left-panel"},Et={class:"entry-fields"},kt={class:"code-list"},bt=["onClick"],Lt={class:"right-panel"},xt={class:"code-actions"},St={class:"footer"},Tt={key:0,class:"loading"},Vt={key:2,class:"error"},Mt={key:0,class:"notification"},Ot={key:3,class:"audio-download"},At=["href"],de=`
INS 0 1 ;
OSC P5 P6 B2 F2 P30;
OUT B2 B1;
END;
GEN 0 1 2 0 0 .999 50 .999 205 -.999 306 -.999 461 0 511;
NOT 0 1 .50 125 8.45;
NOT .75 1 .17 250 8.45;
NOT 4.00 2 .50 500 8.46;
TER 8.00 ;
`,It={__name:"index",setup(h){const g={debug:(t,e,...o)=>{I&&I.value&&console.debug(`[${t}]`,e,...o)},info:(t,e,...o)=>{console.info(`[${t}]`,e,...o)},warn:(t,e,...o)=>{console.warn(`[${t}]`,e,...o)},error:(t,e,...o)=>{console.error(`[${t}]`,e,...o)}},O=new Ve,{startProcessing:Z,completeProcessing:T}=Xe(),C=r(null),V=r(null),M=r(null),i=r(!1);r(0);const p=r(null),b=r(null),y=r(!0),R=r(!1),F=r(!1),$=r(0),P=r(!1),Y=r(!1),A=r(null),j=r([]),E=Je({}),J=r(""),I=r(!1),_=r(!1),D=r(!0),{codes:L,loadCodes:Oe,saveCodes:ve,exportCodes:Ae,importCodes:Ie}=ot(),fe=r({title:"",year:new Date().getFullYear(),composer:"",comments:"",code:""}),N=r(-1),c=r(null),w=r({...fe.value}),le=r(!1),ae=r(.7),ne=r(.3),me=r(0),pe=r(0),ge=r(0),q=r(""),U=r(!1),se=()=>{P.value=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)};qe(async()=>{se(),window.addEventListener("resize",se),window.addEventListener("keydown",Ce);const t=o=>{const a=o.detail||{count:0};q.value=`Imported ${a.count} codes successfully!`,U.value=!0,setTimeout(()=>{U.value=!1},3e3)},e=o=>{const a=o.detail||{error:"Unknown error"};q.value=`Import failed: ${a.error}`,U.value=!0,setTimeout(()=>{U.value=!1},3e3)};window.addEventListener("m5live:import-success",t),window.addEventListener("m5live:import-error",e),await ce(),ie(),await Oe(),console.log("Setting default score in editor"),C.value?(C.value.addToEditor(de),console.log("Default score set in editor")):console.error("Score editor reference not available")}),Ge(()=>{window.removeEventListener("resize",se),window.removeEventListener("keydown",Ce),window.removeEventListener("m5live:import-success",handleImportSuccess),window.removeEventListener("m5live:import-error",handleImportError),A.value&&URL.revokeObjectURL(A.value)});const Ce=t=>{if(t.ctrlKey||t.metaKey)switch(t.key.toLowerCase()){case"m":t.preventDefault(),G();break;case"e":if(t.preventDefault(),A.value){const e=document.createElement("a");e.href=A.value,e.download="m5live-audio.wav",e.click()}break;case"h":t.preventDefault(),he();break;case"p":t.preventDefault(),ie();break;case".":t.preventDefault(),_.value&&z();break}else if(t.altKey&&t.shiftKey)switch(t.key){case"ArrowLeft":t.preventDefault(),we(-1);break;case"ArrowRight":t.preventDefault(),we(1);break}ye(t)},we=t=>{var o;if(L.value.length===0)return;let e=N.value+t;e<0&&(e=L.value.length-1),e>=L.value.length&&(e=0),N.value=e,c.value=L.value[e],D.value=!1,K(),F.value&&M.value?M.value.addToEditor(c.value.code||""):(o=C.value)==null||o.addToEditor(c.value.code||""),J.value=c.value.title||"Untitled",setTimeout(()=>{J.value=""},4e3)},he=()=>{var t;return(t=C.value)==null?void 0:t.clearEditor()},Ne=()=>y.value=!y.value,G=()=>F.value=!F.value,_e=async()=>{var a,n,u;const{randomizeScore:t}=tt(),e=((n=(a=C.value)==null?void 0:a.aceEditor())==null?void 0:n.getValue())||de,o=t(e);D.value=!1,K(),(u=C.value)==null||u.addToEditor(o)},re=()=>{var o,a;const t=(o=C.value)==null?void 0:o.aceEditor(),e=t?t.getValue():"";if(console.log("Binary editor instance:",t),console.log("Binary editor text:",e),!e||!e.trim()){p.value="Please enter some text to evaluate.";return}i.value=!0,Z(),(a=V.value)==null||a.addTerminalOutput("musicV fortran binaries original render next"),i.value=!1,T()},z=async(t=null)=>{var n,u,m,f,k;if(_.value){console.log("Stopping playback..."),O.stop(),_.value=!1,i.value=!1,T();return}const e=(n=C.value)==null?void 0:n.aceEditor(),o=(u=e==null?void 0:e.getValue())==null?void 0:u.trim(),a=t||o;if(!a){console.error("No text to evaluate found in editor"),p.value="Please enter some text to evaluate.";return}D.value=!1,j.value=[],K(),Object.keys(E).forEach(s=>{delete E[s]}),i.value=!0,Z();try{(m=V.value)==null||m.clearTerminal(),O.parseScore(a);const s=O.getConsoleOutput();(f=V.value)==null||f.addTerminalOutput(s),await O.initAudio(44100),await O.play(),_.value=!0;const x=await O.generateSound(10,44100),be=Fe(x,44100);A.value&&URL.revokeObjectURL(A.value),A.value=URL.createObjectURL(be),await ce(),j.value=[...O.getFunctionTables()],D.value=!0}catch(s){console.error("Error during playback:",s),_.value=!1,p.value=s.message,(k=V.value)==null||k.addTerminalOutput(`Error: ${s.message}
`)}finally{i.value=!1,T()}};oe(j,t=>{Object.keys(E).forEach(o=>{const a=E[o];if(a){const n=a.getContext("2d");n&&n.clearRect(0,0,a.width,a.height)}});const e=t.map(o=>o.functionNum);Object.keys(E).forEach(o=>{e.includes(parseInt(o))||delete E[o]}),I.value&&g.debug("App",`Drawing ${t.length} oscilloscopes`),setTimeout(()=>t.forEach(ze),0)},{deep:!0});const He=()=>{var t;if(console.log("handleEvaluateTSFromMenu called, selectedCode:",c.value),c.value&&c.value.code){console.log("Previewing code from menu:",c.value.code);const e=new Ve;try{e.parseScore(c.value.code),e.initAudio(44100).then(()=>{e.play()});const o=e.getConsoleOutput();(t=V.value)==null||t.addTerminalOutput("Preview: "+o)}catch(o){console.error("Error previewing code:",o),p.value=o.message}}else console.error("No code selected in menu"),p.value="No code selected to preview."},ye=t=>{if(t.ctrlKey||t.metaKey)switch(t.key.toLowerCase()){case"enter":t.preventDefault(),re();break}else if(t.altKey)switch(t.key.toLowerCase()){case"enter":t.preventDefault(),z();break}},Fe=(t,e)=>{const o=t.length*2,a=new ArrayBuffer(44+o),n=new DataView(a),u=(k,s)=>{for(let x=0;x<s.length;x++)n.setUint8(k+x,s.charCodeAt(x))};u(0,"RIFF"),n.setUint32(4,36+o,!0),u(8,"WAVE"),u(12,"fmt "),n.setUint32(16,16,!0),n.setUint16(20,1,!0),n.setUint16(22,1,!0),n.setUint32(24,e,!0),n.setUint32(28,e*2,!0),n.setUint16(32,2,!0),n.setUint16(34,16,!0),u(36,"data"),n.setUint32(40,o,!0);const m=.1;let f=44;for(let k=0;k<t.length;k++){const s=Math.max(-1,Math.min(1,t[k]*m)),x=s<0?s*32768:s*32767;n.setInt16(f,x,!0),f+=2}return new Blob([a],{type:"audio/wav"})},De=t=>{le.value=!0,me.value=t.clientY,pe.value=ae.value,ge.value=ne.value,document.addEventListener("mousemove",Ee),document.addEventListener("mouseup",ke),document.body.style.userSelect="none"},Ee=t=>{if(!le.value)return;const e=document.querySelector(".editor-container");if(!e)return;const o=e.clientHeight,n=(t.clientY-me.value)/o;let u=pe.value+n,m=ge.value-n;const f=.2;u<f?(u=f,m=1-f):m<f&&(m=f,u=1-f),ae.value=u,ne.value=m},ke=()=>{le.value=!1,document.removeEventListener("mousemove",Ee),document.removeEventListener("mouseup",ke),document.body.style.userSelect="",ce(()=>{var t,e;(t=C.value)==null||t.resize(),(e=V.value)==null||e.resize()})},ie=()=>{var t;(t=V.value)==null||t.clearTerminal()},Ue=()=>{L.value.push({...w.value}),w.value={title:"",year:new Date().getFullYear(),composer:"",comments:"",code:""},N.value=L.value.length-1,c.value=L.value[N.value],M.value&&M.value.addToEditor("")},Be=async t=>{var e,o;if(t>=0&&c.value){const a=((o=(e=M.value)==null?void 0:e.aceEditor())==null?void 0:o.getValue())||"";L.value[t]={...w.value,code:a},await ve()}},Pe=async t=>{t>=0&&confirm("Delete this code?")&&(L.value.splice(t,1),N.value=-1,c.value=null,w.value={...fe.value},M.value&&M.value.addToEditor(""),await ve())},Re=t=>{var o;N.value=t,c.value=L.value[t],w.value={...c.value};const e=(o=M.value)==null?void 0:o.aceEditor();e&&e.setValue(c.value.code||"",-1)},$e=t=>{c.value&&(c.value.code=t,w.value.code=t)},je=()=>{var t;c.value&&((t=C.value)==null||t.addToEditor(c.value.code||""),G(),K())},ze=t=>{if(!t||!t.functionNum||!t.data||t.data.length===0){I.value&&g.warn("Oscilloscope",`Invalid function table data for F${(t==null?void 0:t.functionNum)||"unknown"}`);return}const e=E[t.functionNum];if(!e){I.value&&g.warn("Oscilloscope",`Canvas not found for function table F${t.functionNum}`);return}const o=e.getContext("2d");if(!o){I.value&&g.warn("Oscilloscope",`Could not get 2D context for canvas F${t.functionNum}`);return}I.value&&g.debug("Oscilloscope",`Drawing function table F${t.functionNum} with ${t.data.length} points`);const a=e.width,n=e.height,u=t.data;o.clearRect(0,0,a,n),o.fillStyle="#1a1a1a",o.fillRect(0,0,a,n),o.strokeStyle="#333333",o.lineWidth=.5;for(let s=0;s<=a;s+=a/4)o.beginPath(),o.moveTo(s,0),o.lineTo(s,n),o.stroke();for(let s=0;s<=n;s+=n/2)o.beginPath(),o.moveTo(0,s),o.lineTo(a,s),o.stroke();o.strokeStyle="#555555",o.beginPath(),o.moveTo(0,n/2),o.lineTo(a,n/2),o.stroke();let m=1/0,f=-1/0;for(let s=0;s<u.length;s++)m=Math.min(m,u[s]),f=Math.max(f,u[s]);m===f&&(m-=.5,f+=.5),o.strokeStyle="#00ff00",o.lineWidth=1.5,o.beginPath();const k=u.length;try{for(let s=0;s<k;s++){const x=s/(k-1)*a,Le=(1-(u[s]-m)/(f-m))*n;s===0?o.moveTo(x,Le):o.lineTo(x,Le)}o.stroke(),o.fillStyle="#00ff00",o.font="9px monospace",o.fillText(`${f.toFixed(2)}`,2,8),o.fillText(`${m.toFixed(2)}`,2,n-2),o.fillText(`${k}p`,a-25,8)}catch(s){I.value&&g.error("Oscilloscope",`Error drawing oscilloscope for F${t.functionNum}:`,s)}},K=()=>{D.value=!1,Object.keys(E).forEach(t=>{const e=E[t];if(e){const o=e.getContext("2d");o&&(o.clearRect(0,0,e.width,e.height),o.fillStyle="#1a1a1a",o.fillRect(0,0,e.width,e.height))}}),Object.keys(E).forEach(t=>{delete E[t]}),j.value=[],I.value&&g.debug("App","Cleared all oscilloscopes")};oe(()=>{var t,e;return(e=(t=C.value)==null?void 0:t.aceEditor())==null?void 0:e.getValue()},()=>{D.value=!1,K()},{deep:!0}),oe(_,t=>{console.log("isPlaying changed to:",t)},{immediate:!0});const Ke=()=>{Ae(),q.value="Codes exported successfully!",U.value=!0,setTimeout(()=>{U.value=!1},3e3)},Ze=()=>{Ie()};return(t,e)=>(v(),d("div",lt,[l("div",at,[l("button",{onClick:Ne,class:"icon-button",title:y.value?"Hide Code":"Show Code"},[y.value?(v(),d("svg",st,e[12]||(e[12]=[l("path",{fill:"currentColor",d:"M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9M12,4.5C17,4.5 21.27,7.61 23,12C21.27,16.39 17,19.5 12,19.5C7,19.5 2.73,16.39 1,12C2.73,7.61 7,4.5 12,4.5M3.18,12C4.83,15.36 8.24,17.5 12,17.5C15.76,17.5 19.17,15.36 20.82,12C19.17,8.64 15.76,6.5 12,6.5C8.24,6.5 4.83,8.64 3.18,12Z"},null,-1)]))):(v(),d("svg",rt,e[13]||(e[13]=[l("path",{fill:"currentColor",d:"M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z"},null,-1)]))),H(Q,{name:"title-fade"},{default:W(()=>[J.value?(v(),d("span",it,B(J.value),1)):S("",!0)]),_:1})],8,nt),l("button",{onClick:re,class:"icon-button",title:"Evaluate Binary (Ctrl+Enter)"},e[14]||(e[14]=[l("svg",{class:"icon",viewBox:"0 0 24 24"},[l("path",{fill:"currentColor",d:"M8,5.14V19.14L19,12.14L8,5.14Z"})],-1),l("span",{class:"f-subscript"},"F",-1)])),l("button",{onClick:z,class:"icon-button",title:_.value?"Stop Audio (Cmd+. or Ctrl+.)":"Evaluate TS (Alt+Enter)"},[(v(),d("svg",ut,[_.value?(v(),d("path",vt)):(v(),d("path",dt))])),e[15]||(e[15]=l("span",{class:"ts-subscript"},"TS",-1))],8,ct),l("button",{onClick:he,class:"icon-button",title:"Clear Editor (Ctrl+H)"},e[16]||(e[16]=[l("svg",{class:"icon",viewBox:"0 0 24 24"},[l("path",{fill:"currentColor",d:"M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,21V6H20V4H15V3H9M7,6H17V19H7V6M9,8V17H11V8H9M13,8V17H15V8H13Z"})],-1)])),l("button",{onClick:_e,class:"icon-button",title:"Randomize Score"},e[17]||(e[17]=[l("svg",{class:"icon",viewBox:"0 0 24 24"},[l("path",{fill:"currentColor",d:"M14.83,13.41L13.42,14.82L16.55,17.95L14.5,20H20V14.5L17.96,16.54L14.83,13.41M14.5,4L16.54,6.04L4,18.59L5.41,20L17.96,7.46L20,9.5V4M10.59,9.17L5.41,4L4,5.41L9.17,10.58L10.59,9.17Z"})],-1)])),l("button",{onClick:e[0]||(e[0]=o=>R.value=!0),class:"icon-button",title:"Help"},e[18]||(e[18]=[l("svg",{class:"icon",viewBox:"0 0 24 24"},[l("path",{fill:"currentColor",d:"M11,18H13V16H11V18M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,6A4,4 0 0,0 8,10H10A2,2 0 0,1 12,8A2,2 0 0,1 14,10C14,12 11,11.75 11,15H13C13,12.75 16,12.5 16,10A4,4 0 0,0 12,6Z"})],-1)])),l("button",{onClick:G,class:"icon-button",title:"Storage Menu (Ctrl+M)"},e[19]||(e[19]=[l("svg",{class:"icon",viewBox:"0 0 24 24"},[l("path",{fill:"currentColor",d:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"})],-1)]))]),y.value?(v(),d("div",ft,[l("div",mt,[l("div",{class:"score-editor",style:xe({flex:ae.value})},[H(ue,{ref_key:"scoreEditorRef",ref:C,mode:"editor",value:de,onEvaluate:re,onEvaluateTS:z,onKeydown:ye},null,512),D.value?(v(),d("div",pt,[(v(!0),d(Se,null,Te(j.value,(o,a)=>(v(),d("div",{key:`table-${o.functionNum}-${a}`,class:"mini-oscilloscope"},[l("div",gt,"F"+B(o.functionNum),1),l("canvas",{ref_for:!0,ref:n=>{n&&(E[o.functionNum]=n)},width:"80",height:"50",class:"mini-oscilloscope-canvas"},null,512)]))),128))])):S("",!0)],4),l("div",{class:"divider",onMousedown:De},null,32),l("div",{class:"console-editor",style:xe({flex:ne.value})},[l("div",{class:"console-header"},[l("button",{class:"clear-btn",onClick:ie,title:"Clear console (Ctrl+P)"},"🗑️")]),H(ue,{ref_key:"consoleEditorRef",ref:V,mode:"terminal"},null,512)],4)])])):S("",!0),H(Q,{"enter-active-class":"fadeIn","leave-active-class":"fadeOut",duration:3e3,mode:"out-in"},{default:W(()=>[b.value?(v(),d("div",{class:"plot-display",key:$.value},[l("img",{src:`data:image/png;base64,${b.value}`,alt:"Plot",onClick:e[1]||(e[1]=o=>Y.value=!0),class:"plot-image"},null,8,Ct)])):S("",!0)]),_:1}),H(Q,{"enter-active-class":"fadeIn","leave-active-class":"fadeOut",duration:300},{default:W(()=>[Y.value?(v(),d("div",{key:0,class:"lightbox",onClick:e[4]||(e[4]=o=>Y.value=!1)},[l("button",{class:"close-button",onClick:e[2]||(e[2]=X(o=>Y.value=!1,["stop"]))},e[20]||(e[20]=[l("svg",{class:"icon",viewBox:"0 0 24 24"},[l("path",{fill:"currentColor",d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})],-1)])),l("img",{src:`data:image/png;base64,${b.value}`,alt:"Plot",class:"lightbox-image",onClick:e[3]||(e[3]=X(()=>{},["stop"]))},null,8,wt)])):S("",!0)]),_:1}),F.value?(v(),d("div",{key:1,class:"storage-menu",onClick:X(G,["self"])},[l("div",ht,[l("div",yt,[l("div",Et,[l("form",{onSubmit:X(Ue,["prevent"])},[ee(l("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>w.value.title=o),placeholder:"Title",required:""},null,512),[[te,w.value.title]]),ee(l("input",{type:"number","onUpdate:modelValue":e[6]||(e[6]=o=>w.value.year=o),placeholder:"Year",required:""},null,512),[[te,w.value.year,void 0,{number:!0}]]),ee(l("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>w.value.composer=o),placeholder:"Composer",required:""},null,512),[[te,w.value.composer]]),ee(l("textarea",{"onUpdate:modelValue":e[8]||(e[8]=o=>w.value.comments=o),placeholder:"Comments",rows:"3",required:""},null,512),[[te,w.value.comments]]),e[21]||(e[21]=l("button",{type:"submit"},"Add",-1))],32)]),l("div",kt,[(v(!0),d(Se,null,Te(We(L),(o,a)=>(v(),d("div",{key:a,class:Qe({selected:N.value===a}),onClick:n=>Re(a)},B(o.composer)+" - "+B(o.year)+" - "+B(o.title||"Untitled"),11,bt))),128))])]),l("div",Lt,[H(ue,{ref_key:"codeEditorRef",ref:M,mode:"editor",value:c.value?c.value.code:"",onInput:$e},null,8,["value"]),l("div",xt,[l("button",{onClick:He},"[ Play TS ]"),l("button",{onClick:je},"[ To Editor ]"),l("button",{onClick:e[9]||(e[9]=o=>Be(N.value))},"[ Update ]"),l("button",{onClick:e[10]||(e[10]=o=>Pe(N.value))},"[ Delete ]"),l("button",{onClick:Ke},"[ Export ]"),l("button",{onClick:Ze},"[ Import ]")])])])])):S("",!0),l("div",St,[i.value?(v(),d("div",Tt)):S("",!0),P.value?(v(),d("button",{key:1,onClick:z,class:"mobile-evaluate-btn",title:"Alt+Enter"},"Evaluate TS")):S("",!0)]),p.value?(v(),d("div",Vt,B(p.value),1)):S("",!0),H(et,{modelValue:R.value,"onUpdate:modelValue":e[11]||(e[11]=o=>R.value=o)},null,8,["modelValue"]),H(Q,{name:"fade"},{default:W(()=>[U.value?(v(),d("div",Mt,B(q.value),1)):S("",!0)]),_:1}),A.value?(v(),d("div",Ot,[l("a",{href:A.value,download:"m5live-audio.wav",class:"audio-download-link",title:"Download generated audio"},e[22]||(e[22]=[l("svg",{class:"icon",viewBox:"0 0 24 24"},[l("path",{fill:"currentColor",d:"M3,3v18h18V3H3z M7,17L7,7l2,0l0,4l2-2l2,2l0-4l2,0l0,10l-2,0l0-4l-2-2l-2,2l0,4L7,17z"})],-1)]),8,At)])):S("",!0)]))}},Ft=Ye(It,[["__scopeId","data-v-6a20f578"]]);export{Ft as default};
